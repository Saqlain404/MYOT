"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[4058],{64058:(e,s,l)=>{l.r(s),l.d(s,{default:()=>j});var a=l(72791),t=l(39040),d=l(11087),i=l(89542),o=l(58400),n=l(72426),c=l.n(n),r=l(13496),m=l(80184);const h=e=>{var s;let{tempData:l}=e;console.log(l);const a={series:[{name:"Templates",data:null===l||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.templete))}],options:{chart:{type:"line",toolbar:{show:!1}},colors:["#FF5BEF"],stroke:{width:7,curve:"smooth"},dataLabels:{enabled:!1},xaxis:{categories:null===l||void 0===l?void 0:l.map((e=>{const s=(e=>{const s=new Date(null);return s.setUTCMonth(e-1),s.toLocaleString("default",{month:"short"})})(e._id);return"".concat(s)}))},fill:{type:"gradient",gradient:{shade:"dark",type:"horizontal",shadeIntensity:1,gradientToColors:["#5BC4FF"],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}}}};return(0,m.jsxs)("div",{className:"gradient-line-chart",children:[(0,m.jsx)("p",{className:"ms-4 fw-bold",children:"Total Templates"}),(0,m.jsx)("div",{style:{overflow:"auto"},children:(0,m.jsx)(r.Z,{options:a.options,series:a.series,type:"line",height:"300",width:650*(null===a||void 0===a||null===(s=a.series)||void 0===s?void 0:s.length)})})]})};var v=l(81888),x=l(7497),u=l(81161);const j=()=>{var e,s,n,r;const[j,p]=(0,a.useState)(""),[b,g]=(0,a.useState)([]),[N,f]=(0,a.useState)(),[w,A]=(0,a.useState)(),[C,y]=(0,a.useState)(!1),[k,V]=(0,a.useState)(),[T,S]=(0,a.useState)(),[F,B]=(0,a.useState)({columns:[{label:"Template Name",field:"name",sort:"asc",width:50,selected:!1},{label:"Creator",field:"assigned",sort:"asc",width:50,selected:!1},{label:"Version",field:"version",sort:"asc",width:100,selected:!1},{label:"Date of Creation",field:"date",sort:"asc",width:100,selected:!1},{label:"Status",field:"status",sort:"asc",width:100,selected:!1},{label:"Department",field:"department",sort:"asc",width:100,searchable:!0,selected:!1},{label:"Actions",field:"actions",sort:"asc",width:100,selected:!1}],rows:[],hiddenColumns:[],selectedColumns:[]});(0,a.useEffect)((()=>{Z()}),[]);const U=localStorage.getItem("user_id")||localStorage.getItem("myot_admin_id"),Z=async()=>{let e=await(0,o.PA)(U);console.log(e);const s=[];if(null===e||void 0===e||!e.error){let l=e;console.log(l),null===l||void 0===l||l.sort(((e,s)=>new Date(null===s||void 0===s?void 0:s.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt))),null===l||void 0===l||l.map(((e,l)=>{var a,t,i,o,n,r;const h={};h.name=null===e||void 0===e?void 0:e.templeteName,h.assigned=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("img",{className:"w_20_h_20",src:null===e||void 0===e||null===(a=e.manager)||void 0===a?void 0:a.profile_Pic,alt:""}),(0,m.jsx)("span",{className:"ms-2 text-capitalize",children:null===e||void 0===e||null===(t=e.manager)||void 0===t?void 0:t.name})]}),h.version=(0,m.jsx)(m.Fragment,{children:null!==e&&void 0!==e&&e.templeteVersion&&(null===e||void 0===e||null===(i=e.templeteVersion)||void 0===i?void 0:i.length)>0?" ".concat(null===e||void 0===e||null===(o=e.templeteVersion[(null===e||void 0===e?void 0:e.templeteVersion.length)-1])||void 0===o?void 0:o.version):"No versions found"}),h.date=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("img",{src:"/images/dashboard/CalendarBlank.png"})," ",(0,m.jsx)("span",{className:"ms-2",children:c()(null===e||void 0===e?void 0:e.createdAt).format("L")})]}),h.department=(null===e||void 0===e||null===(n=e.manager)||void 0===n||null===(r=n.department_Id)||void 0===r?void 0:r.departmentName)||"NA",h.status=(0,m.jsx)("span",{className:'"td-text status" '.concat("Pending"===(null===e||void 0===e?void 0:e.status)?"text-info":"Approved"===(null===e||void 0===e?void 0:e.status)?"text-warning":"In Progress"===(null===e||void 0===e?void 0:e.status)?"text-primary":"Completed"==(null===e||void 0===e?void 0:e.status)?"text-success":"text-danger"),children:null===e||void 0===e?void 0:e.status}),h.comments=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("a",{type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,m.jsx)("img",{src:"/images/dashboard/Comment.png",className:"mx-auto d-block"})})," ","*/"]})}),h.actions=(0,m.jsxs)("div",{class:"text-center",children:[(0,m.jsx)("a",{className:"cursor_pointer",type:"","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,m.jsx)("img",{src:"/images/sidebar/ThreeDots.svg",className:"w-auto"})}),(0,m.jsxs)("ul",{class:"dropdown-menu border-0 shadow p-3 mb-5 rounded",children:[(0,m.jsx)("li",{children:(0,m.jsx)(d.rU,{to:"/Approver/Template-view/".concat(null===e||void 0===e?void 0:e._id),className:"text-decoration-none",children:(0,m.jsxs)("a",{class:"dropdown-item border-bottom",href:"/",children:[(0,m.jsx)("img",{src:"/images/users/AddressBook.svg",alt:"",className:"me-2"}),"View Users Details"]})})}),(0,m.jsx)("li",{children:(0,m.jsxs)(d.rU,{class:"dropdown-item",to:"/Approver/Comment/".concat(null===e||void 0===e?void 0:e._id),children:[(0,m.jsx)("img",{src:"/images/dashboard/Comment.png",alt:"",className:"me-2"}),"Comments"]})}),"Approved"!==e.status&&(0,m.jsx)("li",{children:(0,m.jsxs)("a",{onClick:()=>L(null===e||void 0===e?void 0:e._id),class:"dropdown-item border-bottom",href:"#",children:[(0,m.jsx)("img",{src:"/images/users/PencilLine.svg",alt:"",className:"me-2"}),"Approved"]})}),"Rejected"!==e.status&&(0,m.jsx)("li",{children:(0,m.jsxs)("a",{onClick:()=>S(null===e||void 0===e?void 0:e._id),"data-bs-toggle":"modal","data-bs-target":"#commentModal",class:"dropdown-item text-danger",href:"#",children:[(0,m.jsx)("img",{src:"/images/XCircle.svg",alt:"",className:"me-2"}),"Rejected"]})})]})]}),s.push(h)})),B({...F,rows:s})}},L=async e=>{await(0,o.lp)(e);Z()},_=F.columns.map((e=>({...e,label:(0,m.jsx)("div",{className:"",children:(0,m.jsx)(x.Z,{checked:F.selectedColumns.includes(e.field),onChange:()=>(e=>{let s=[...F.selectedColumns];const l=s.indexOf(e);l>-1?s.splice(l,1):s.push(e),B({...F,selectedColumns:s})})(e.field),defaultChecked:!0,children:e.label})},e.field)}))).filter((e=>!F.hiddenColumns.includes(e.field)));(0,a.useEffect)((()=>{(async()=>{const e=await(0,o.bq)();console.log(e),f(e)})()}),[]);const[Q,D]=(0,a.useState)([]),[G,R]=(0,a.useState)([]);(0,a.useEffect)((()=>{Y(),E()}),[]);const Y=async()=>{let{data:e}=await(0,o.Ny)();console.log(e),null!==e&&void 0!==e&&e.error||(D(null===e||void 0===e?void 0:e.results),console.log(Q))},E=async()=>{let{data:e}=await(0,o.HY)();var s;null!==e&&void 0!==e&&e.error||(R(null===e||void 0===e||null===(s=e.results)||void 0===s?void 0:s.totalDocument),console.log(G))};return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"container-fluid",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-2 sidebar",children:(0,m.jsx)(i.Z,{})}),(0,m.jsxs)("div",{className:"col-7 middle-content",children:[(0,m.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,m.jsxs)("nav",{className:"row header bg-white  ",children:[(0,m.jsx)("ul",{className:"col align-items-center mt-3",children:(0,m.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,m.jsx)("a",{className:"nav-link fw-bold ms-2",children:"Dashboard"})})}),(0,m.jsx)("div",{className:"col d-flex align-items-center  justify-content-end",children:(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,m.jsx)(d.rU,{to:"/Approver/Chat",children:(0,m.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,m.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})})]})}),(0,m.jsx)("div",{className:"col-12 mb-4",children:(0,m.jsxs)("div",{className:"row statics_part",children:[(0,m.jsx)("div",{className:"col-md-3",children:(0,m.jsxs)("div",{className:"statics_box card-clr-1-3",children:[(0,m.jsx)("div",{className:"statics_left",children:(0,m.jsx)("h6",{className:"mb-0 header-card-text",children:"Total Users"})}),(0,m.jsx)("div",{className:"d-flex  mt-4",children:(0,m.jsx)("h3",{className:"card-text-count mb-0 fw-semibold fs-7",children:(null===N||void 0===N||null===(e=N.totalUser[0])||void 0===e?void 0:e.count)||0})})]})}),(0,m.jsx)("div",{className:"col-md-3 ",children:(0,m.jsxs)("div",{className:"statics_box card-clr-2-4",children:[(0,m.jsx)("div",{className:"statics_left",children:(0,m.jsx)("h6",{className:"mb-0 header-card-text",children:"Total Templates"})}),(0,m.jsx)("div",{className:"d-flex  mt-4",children:(0,m.jsx)("h3",{className:"card-text-count mb-0 fw-semibold fs-7",children:(null===N||void 0===N||null===(s=N.totalTemplete[0])||void 0===s?void 0:s.count)||0})})]})}),(0,m.jsx)("div",{className:"col-md-3 ",children:(0,m.jsxs)("div",{className:"statics_box card-clr-1-3",children:[(0,m.jsx)("div",{className:"statics_left",children:(0,m.jsx)("h6",{className:"mb-0 header-card-text",children:"Documents Generated"})}),(0,m.jsx)("div",{className:"d-flex  mt-4",children:(0,m.jsx)("h3",{className:"card-text-count mb-0 fw-semibold fs-7",children:(null===N||void 0===N||null===(n=N.totalDocument[0])||void 0===n?void 0:n.count)||0})})]})}),(0,m.jsx)("div",{className:"col-md-3 ",children:(0,m.jsxs)("div",{className:"statics_box card-clr-2-4",children:[(0,m.jsx)("div",{className:"statics_left",children:(0,m.jsx)("h6",{className:"mb-0 header-card-text",children:"Active Users"})}),(0,m.jsx)("div",{className:"d-flex mt-4",children:(0,m.jsx)("h3",{className:"card-text-count mb-0 fw-semibold fs-7",children:(null===N||void 0===N||null===(r=N.totalActiveUser[0])||void 0===r?void 0:r.count)||0})})]})})]})}),(0,m.jsx)("div",{className:"col-12",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-9 mt-4 ",children:(0,m.jsx)(h,{tempData:null===Q||void 0===Q?void 0:Q.totalTemplete})}),(0,m.jsx)("div",{className:"col-md-3 mt-4",children:(0,m.jsxs)("div",{className:"dashboard-card3 bg-light ",style:{maxHeight:"320px",overflowY:"auto"},children:[(0,m.jsx)("p",{className:"text-card",children:"Document Request"}),(0,m.jsx)("div",{className:"table-card3 dashboard-card3-text mt-3",children:null===G||void 0===G?void 0:G.map(((e,s)=>{var l,a,t,d;return(0,m.jsxs)("div",{className:"pb-2 row align-items-center",children:[(0,m.jsx)("div",{className:"doc-req-text col-6 me-2",children:(null===e||void 0===e||null===(l=e._id)||void 0===l||null===(a=l[0])||void 0===a||null===(t=a[0])||void 0===t||null===(d=t[0])||void 0===d?void 0:d.departmentName)&&e._id[0][0][0].departmentName.split(" ")[0]||"NA"}),(0,m.jsx)("div",{className:"doc-req-bar col-6 ",style:{width:"".concat(null===e||void 0===e?void 0:e.count,"%")}})]},s)}))})]})})]})}),(0,m.jsxs)("div",{className:"position-relative mt-4",children:[(0,m.jsx)("p",{className:"table-name mb-2",children:"Templates"}),(0,m.jsxs)("div",{className:" col-12 d-flex align-items-center table-searchbar",children:[(0,m.jsxs)("div",{className:"d-flex ",children:[(0,m.jsx)("div",{className:"col-md-3 table-searchbar-imgs",children:(0,m.jsx)("img",{src:"/images/dashboard/ArrowsDownUp.png",onClick:()=>{const e="asc"===F.sortType?"desc":"asc",s=[...F.rows].sort(((s,l)=>{var a,t,d,i;let o=0;return(null===(a=s.name)||void 0===a?void 0:a.toLowerCase())<(null===(t=l.name)||void 0===t?void 0:t.toLowerCase())?o=-1:(null===(d=s.name)||void 0===d?void 0:d.toLowerCase())>(null===(i=l.name)||void 0===i?void 0:i.toLowerCase())&&(o=1),"asc"===e?o:-1*o}));console.log(s),B({...F,rows:s,sortType:e})},className:"p-2 table-searchbar-img border-end cursor_pointer"})}),(0,m.jsxs)("div",{className:"d-flex ms-2 align-items-center justify-content-around table-searchbar-txt",children:[(0,m.jsxs)("p",{className:"m-0 text-nowrap",children:[(null===F||void 0===F?void 0:F.selectedColumns)&&(null===F||void 0===F?void 0:F.selectedColumns.length),(0,m.jsx)("span",{children:" Selected"})]}),C?(0,m.jsx)("p",{className:"hide-selected ms-2 m-0 text-nowrap cursor_pointer ",onClick:()=>{B({...F,hiddenColumns:[],selectedColumns:[]}),y(!1)},children:"Clear Selection"}):(0,m.jsx)("p",{className:"hide-selected m-0 ms-2 text-nowrap cursor_pointer ",onClick:()=>{const e=[...F.hiddenColumns,...F.selectedColumns];B({...F,hiddenColumns:e,selectedColumns:[]}),y(!0)},children:"Hide Selected"})]}),(0,m.jsx)("div",{class:"search_icon",children:(0,m.jsx)("img",{width:20,src:l(28879)})})]}),(0,m.jsx)("form",{className:"d-flex me-2",role:"search"})]}),(0,m.jsx)("div",{className:"col-12 mdb_table mt-3 mb-4",children:(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsx)(v.g0K,{bordered:!0,displayEntries:!1,entries:10,className:"text-nowrap",hover:!0,data:{...F,columns:_},noBottomColumns:!0,paginationLabel:"\xab\xbb",sortable:!1})})})]})]}),(0,m.jsx)("div",{className:"col",children:(0,m.jsx)(t.Z,{})}),(0,m.jsx)("div",{class:"modal fade",id:"commentModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,m.jsx)("div",{class:"modal-dialog modal-dialog-centered",children:(0,m.jsxs)("div",{class:"modal-content",children:[(0,m.jsxs)("div",{class:"modal-header",children:[(0,m.jsx)("h5",{class:"modal-title th-text fs-6",id:"exampleModalLabel",children:"Add Reason"}),(0,m.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"closeForm"})]}),(0,m.jsx)("div",{class:"modal-body",children:(0,m.jsxs)("form",{className:"rounded",onSubmit:async e=>{e.preventDefault();await(0,o.NN)(T,{reasons:k})&&(V(""),Z())},children:[(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{className:"form-label th-text"}),(0,m.jsx)("input",{type:"text",className:"form-control w-100",placeholder:"Type reason...",value:k,onChange:e=>V(e.target.value)})]}),(0,m.jsx)("div",{className:"d-flex justify-content-end",children:(0,m.jsx)("div",{children:(0,m.jsx)(u.Z,{style:{width:"100px"},type:"submit",appearance:"primary",color:"red","data-bs-dismiss":"modal",disabled:!k||/^\s+$/.test(k),children:"Reject"})})})]})})]})})})]})})})}},28879:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAD7UlEQVRYR8WWXYhUZRiAn/cM/qQlZtbumbOGUlkq0V1BFEFt1JVQSwtChBmVZj904UVbO+c7s6b9IRaUuhe53cVWG11EQZCSBCoRIZZlQgt2zigutGBZ7c956ztzVmZnZ2bn7IC+d2fm/Xnen+/7XuEyi1zm+GQGWGd0/gh05KA9htGFEA0bGZ1rIk0BXL9Tr54Y41GBLoV7agQ7hfIxOQaiXvklC0xDgGW+LlngUBDYAixqxrHAJyg9oZGTTerXVstv1xVM8iWwtkJjGPhchOOx8htwncBNwP3A7YCT6p5XpbtkxNo3lJoVaOvTVbmYo8Bya63CQWL8kpFv6nmzwDpBjwibUx1V6Cr58mkjghkAtuwLHb6jnJmVPVGBrYjobNnY/11fHxaHD4F5wN+i3Bka+aGe7QwAz+g+FZ5KMlf2lozY/meSvNH1CDZz25KTkbIGI3EtJ9MA2o2udYQfU8VvowJ3N5t5tXM30O0CLye/C09EBXl/VoB8oO9Rnngk5r4wkK8zpV6hvNLo0jHhNHAlcCzy5bZZAdxAIwEXGI58WTXX4FN2eaP7ETba71yMdzqQqNrnxRZ0GL0xFn5NFJS3IiPbWgVwA31IYKjcBTaGvnxQF8D19S5xOJQoC1vCguxtFSDfpzcT83OaVDEy4tcFSCf3s3RoNkQFsUepJenYpVfE57mQOtkf+bKpEUAnwldpuTaHvuxrKTrg7dBrdJyR1M+eyJdn6gK0F3WdoxxPFUzkS9AqQEdRb42VY2lSr4S+vFoXoO1NXZy7wB/pDXYg8uXeVgHcQF8Q2J3MdUxXKZBkICtl2kWUL+oXKA8C8bjinTNyphUIN9AjUn6kxseVZeeM/NkYINDHgfKNpQxERuz3nMQL9BGFwaT8wlBYkK5ajqa/BYOay5/gFLAy7Vt36MtHWQk8o6tVOAIstak4yurfjVi/M2TGY+QG+oCQ7AFWJgU2ZIFw+3SNxMlp8pIklN2hkRfrJVFzH/AC7VUoXjRSipOLeePsNvmrbjWMOnmHbhR7fJckXRQOlm6hk26ZzARgld1AdwlUktsT0p+LeafyTl/+ul417x/sBfOcwA0VgQ7NV9bPtrA23Am9QJ9WeBtYkGUOROkPYStGJqxdPlBfhX9LBXmt4SmoFaR9h16bG6NHy6+aHap6MoYyFEPfGSM/TSm5RX1eNEnCtuSlaoim1vLE2aDm3BN0OnYtV1ao0AaMihLGwvfxIoZqzYgb6JMC/VNACj0lX3ZOfTcPkKUHVbrVEMCzkS/vJqekBb+ZTL2iPqbKwP/BRyYd7jjbK3atv3QAyTAWdVMcc7hyRi5ZBTLfA5nq24LyfxJhZTC25f8ZAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=4058.847087da.chunk.js.map