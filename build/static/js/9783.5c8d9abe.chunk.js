"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[9783],{49783:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var l=a(72791),d=a(39040),t=a(54347),n=a(11087),c=a(28113),i=a(72426),o=a.n(i),r=a(81161),m=a(21830),x=a.n(m),h=a(80184);const p=()=>{const[e,s]=(0,l.useState)([]),[a,i]=(0,l.useState)(""),[m,p]=(0,l.useState)(""),[u,j]=(0,l.useState)([]),[b,g]=(0,l.useState)(!1);(0,l.useEffect)((()=>{v()}),[]);const v=async()=>{let e=localStorage.getItem("myot_admin_id"),{data:a}=await(0,c.p7)(e);var l;(console.log(a),null!==a&&void 0!==a&&a.error)||s(null===a||void 0===a||null===(l=a.results)||void 0===l?void 0:l.announcementList)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"container-fluid",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-2 sidebar",children:(0,h.jsx)(t.Z,{})}),(0,h.jsxs)("div",{className:"col-7 middle-content",children:[(0,h.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,h.jsxs)("nav",{className:"row header bg-white  ",children:[(0,h.jsx)("ul",{className:"col align-items-center mt-3",children:(0,h.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,h.jsx)("a",{className:"nav-link fw-bold",children:"Announcements"})})}),(0,h.jsxs)("div",{className:"col d-flex align-items-center  justify-content-end",children:[(0,h.jsx)("form",{className:"",role:"search",children:(0,h.jsx)("input",{className:"form-control search-bar",type:"search",placeholder:"Search","aria-label":"Search"})}),(0,h.jsxs)("div",{className:"",children:[(0,h.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,h.jsx)(n.rU,{to:"/Admin/Chat",children:(0,h.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,h.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})]})]})}),(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("p",{className:"table-name mb-2",children:"Broadcast Announcement"}),(0,h.jsx)("div",{className:"d-flex justify-content-center th-text",children:(0,h.jsxs)("div",{className:"d-flex whitespace-nowrap",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[(0,h.jsx)("img",{src:"/images/tasks/Add.svg",alt:"",className:"pb-3"}),(0,h.jsx)("p",{className:"pt-1 text-nowrap",children:"Add Announcement"})]})})]}),(0,h.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,h.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-dialog-department",children:(0,h.jsx)("div",{class:"modal-content border-0",children:(0,h.jsxs)("form",{onSubmit:async e=>{g(!0),e.preventDefault();let s=localStorage.getItem("myot_admin_id"),l=new FormData;l.append("categoryName",a),l.append("document",null===u||void 0===u?void 0:u.doc_img),l.append("text",m),l.append("creator_Id",s);try{let{data:e}=await(0,c.gd)(l);console.log(e),!e||null!==e&&void 0!==e&&e.error||(x().fire({toast:!0,icon:"success",position:"top-end",title:"Announcement created",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),i(""),p(""),j([]),document.getElementById("resetForm").click(),document.getElementById("modalClose").click(),v())}catch(d){console.log(d)}finally{g(!1)}},children:[(0,h.jsxs)("div",{class:"d-flex modal-header border-bottom",children:[(0,h.jsx)("p",{class:"mb-0",id:"exampleModalLabel",children:"Create New Announcement"}),(0,h.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"modalClose"})]}),(0,h.jsxs)("div",{className:"row p-3",children:[(0,h.jsxs)("div",{className:"col-12 mb-3 d-flex",children:[(0,h.jsxs)("div",{className:"col-6 pe-3",children:[(0,h.jsx)("label",{htmlFor:"announcementType",className:"mb-3",children:"Announcement Category"}),(0,h.jsx)("input",{type:"text",placeholder:"Announcement Category",className:"col-12 modal-input td-text  p-2",name:"announcementType",id:"announcementType",value:a,onChange:e=>i(e.target.value)})]}),(0,h.jsxs)("div",{className:"col-6 mb-3 ",children:[(0,h.jsx)("label",{htmlFor:"doc_file",className:"mb-3",children:"Document Upload"}),(0,h.jsx)("input",{type:"file",placeholder:"File Format: JPG, JPEG, PNG or PDF Size: Upto 500KB",className:"col-12 modal-input td-text p-2 display-none",name:"doc_file",id:"doc_file",onChange:e=>((e,s)=>{j({...u,[s]:e.target.files[0]})})(e,"doc_img"),accept:".png, .jpg, .jpeg, .pdf"})]})]}),(0,h.jsxs)("div",{className:"col-12 mb-3 ",children:[(0,h.jsx)("label",{htmlFor:"description",className:"mb-3",children:"Description"}),(0,h.jsx)("textarea",{type:"text",placeholder:"",className:"col-12 modal-input td-text p-2 text-area",name:"description",id:"description",value:m,onChange:e=>p(e.target.value)})]})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-end mb-3 me-3",children:[(0,h.jsx)(r.Z,{style:{width:"150px"},loading:b,appearance:"primary",className:"btn mb-3 me-2 rounded-2",type:"submit",disabled:!a||!m,children:"Add New"}),(0,h.jsx)(r.Z,{style:{width:"100px"},type:"reset",className:"btn mb-3 mx-2 rounded-2 bg-light text-dark border-0","data-bs-dismiss":"modal","aria-label":"Close",children:"Cancel"}),(0,h.jsx)("button",{type:"reset",id:"resetForm",className:"d-none",children:"reset"})]})]})})})}),(0,h.jsx)("div",{className:"container rounded mb-3",children:e&&(null===e||void 0===e?void 0:e.map((e=>(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"row my-4 bg-body-tertiary",children:[(0,h.jsx)("p",{className:"templates-leave mt-3 ms-2 mb-0 ",children:"Announcement > ".concat(null===e||void 0===e?void 0:e.categoryName)}),(0,h.jsx)("div",{className:"col-12",children:(0,h.jsxs)("div",{className:"col rounded bg-white d-flex m-3 p-2 algin-items-center justify-content-between",children:[(0,h.jsxs)("div",{className:"ps-2 pe-3",children:[(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)("img",{style:{width:"20px",height:"20px",borderRadius:"50%"},src:null!==e&&void 0!==e&&e.document?null===e||void 0===e?void 0:e.document:"/images/dashboard/user (2) 1.svg",alt:"",className:"me-2"}),(0,h.jsx)("p",{className:"anouncement-text ms-1",children:null===e||void 0===e?void 0:e.text})]}),(0,h.jsxs)("div",{className:"d-flex ms-4 mt-1",children:[(0,h.jsx)("img",{src:"/images/dashboard/bookmark 1.svg",alt:"",className:"m-1 "}),(0,h.jsx)("p",{className:"new-feedback",children:"New feedback added"})]})]}),(0,h.jsx)("p",{className:"announcement-time",children:o()(null===e||void 0===e?void 0:e.createdAt).calendar()})]})})]})}))))}),(0,h.jsxs)("div",{className:"footer",children:[(0,h.jsx)("div",{children:"\xa9 2023 MYOT"}),(0,h.jsxs)("div",{className:"d-flex ",children:[(0,h.jsx)("p",{className:"ms-3",children:"About"}),(0,h.jsx)("p",{className:"ms-3",children:"Support"}),(0,h.jsx)("p",{className:"ms-3",children:"Contact Us"})]})]})]}),(0,h.jsx)("div",{className:"col",children:(0,h.jsx)(d.Z,{})})]})})})}}}]);
//# sourceMappingURL=9783.5c8d9abe.chunk.js.map