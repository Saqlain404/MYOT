"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[949],{60949:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var l=t(72791),a=t(39040),i=t(57689),n=t(11087),r=t(98726),o=t(30059),c=t(59434),d=t(64581),m=t(21830),h=t.n(m),x=t(28113),v=t(72426),u=t.n(v),p=t(29655),j=t(80184);const g=()=>{const[e,s]=(0,l.useState)([]),[t,m]=(0,l.useState)(!1),[v,g]=(0,l.useState)(""),[f,N]=(0,l.useState)(""),b=(0,c.v9)(d.tT),{id:y}=(0,i.UO)();(0,l.useEffect)((()=>{w()}),[]);const w=async()=>{try{let{data:l}=await(0,o.xq)(y);var e,t;if(null===l||void 0===l||!l.error)s(null===l||void 0===l||null===(e=l.results)||void 0===e?void 0:e.commentDetails),console.log(null===l||void 0===l||null===(t=l.results)||void 0===t?void 0:t.commentDetails)}catch(l){console.log(l)}};return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"container-fluid",children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-2 sidebar",children:(0,j.jsx)(r.Z,{})}),(0,j.jsxs)("div",{className:"col-7 middle-content bg-body-tertiary p-0 min-vh-100",children:[(0,j.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,j.jsxs)("nav",{className:"row header bg-white  ",children:[(0,j.jsx)("ul",{className:"col align-items-center mt-3",children:(0,j.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,j.jsx)("a",{className:"nav-link fw-bold",children:" Comments"})})}),(0,j.jsxs)("div",{className:"col-7 d-flex align-items-center  justify-content-end",children:[(0,j.jsx)("form",{className:"",role:"search",children:(0,j.jsx)("input",{className:"form-control search-bar",type:"search",placeholder:"Search","aria-label":"Search"})}),(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,j.jsx)(n.rU,{to:"/Admin/Chat",children:(0,j.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,j.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})]})]})}),(0,j.jsxs)("div",{className:"container px-4 text-center min-vh-100 ",children:[(0,j.jsx)("p",{className:"templates-leave mt-3  d-flex ",children:"Comments"}),e&&(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e.map(((e,s)=>{var l,a,i,r;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"bg-white rounded p-2 mb-3",children:[(0,j.jsxs)("div",{className:"d-flex  justify-content-between",children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("img",{src:null!==e&&void 0!==e&&null!==(l=e.creator_Id)&&void 0!==l&&l.profile_Pic?null===e||void 0===e||null===(a=e.creator_Id)||void 0===a?void 0:a.profile_Pic:"/images/dashboard/Avatar.png",alt:"",className:"m-2 w_20_h_20"}),(0,j.jsx)("p",{className:"commenter-name m-auto text-capitalize",children:null===e||void 0===e||null===(i=e.creator_Id)||void 0===i?void 0:i.name}),(0,j.jsx)("p",{className:"comment-time m-auto",children:u()(null===e||void 0===e?void 0:e.createdAt).calendar()})]}),(0,j.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,j.jsx)("div",{className:"cursor_pointer d-flex align-items-center",onClick:()=>(e=>{m((s=>({...Object.fromEntries(Object.entries(s).map((e=>{let[s]=e;return[s,!1]}))),[e]:!s[e]})))})(s),children:t[s]?(0,j.jsx)(n.rU,{className:"ticket-link me-1 text-decoration-none",children:"Cancel"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("img",{src:"/images/dashboard/reply-arrow.svg",className:"me-1"}),(0,j.jsx)(n.rU,{className:"ticket-link me-1 text-decoration-none",children:"Reply"})]})}),(0,j.jsxs)("div",{onClick:s=>(async(e,s)=>{e.preventDefault();try{let{data:e}=await(0,o.FX)(s);e&&!e.error&&(h().fire({toast:!0,icon:"success",position:"top-end",title:"Comment deleted successfully",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),w())}catch(t){console.log(t)}})(s,null===e||void 0===e?void 0:e._id),className:"ms-2",children:[(0,j.jsx)("img",{src:"/images/icons/delete_icon.png",className:"me-1"}),(0,j.jsx)(n.rU,{className:"ticket-link me-1 text-decoration-none text-danger",children:"Delete"})]})]})]}),(0,j.jsx)("p",{className:"comment-txt p-2 mb-0",children:null===e||void 0===e||null===(r=e[0])||void 0===r?void 0:r.comment}),(null===e||void 0===e?void 0:e.replyText)&&(0,j.jsx)("div",{style:{borderLeft:"2px solid #f8f9fa"},className:"text-start ms-5",children:null===e||void 0===e?void 0:e.replyText.map((e=>{var s,t;return(0,j.jsx)("div",{className:"bg-white p-2 mb-3",children:(0,j.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)("img",{className:"w_20_h_20 me-1",src:null===e||void 0===e||null===(s=e.creator_Id)||void 0===s?void 0:s.profile_Pic,alt:""}),(0,j.jsx)("p",{className:"commenter-name my-auto text-capitalize",children:null===e||void 0===e||null===(t=e.creator_Id)||void 0===t?void 0:t.name})]}),(0,j.jsx)("p",{className:"comment-txt p-2 mb-0",children:null===e||void 0===e?void 0:e.text})]}),(0,j.jsx)("div",{})]})})}))}),t[s]&&(0,j.jsx)("div",{className:"bg-white rounded p-2 my-3 task_reply",children:(0,j.jsx)("form",{onSubmit:s=>(async(e,s)=>{if(e.preventDefault(),v.trim().length<=0)return h().fire({toast:!0,icon:"warning",position:"top-end",title:"Please enter reply",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),!1;let t=localStorage.getItem("myot_admin_id"),{data:l}=await(0,x.CR)({text:v,comment_Id:s,creator_Id:t});console.log(l),!l||null!==l&&void 0!==l&&l.error||((0,p.Am)("Reply added",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),g(""),m(!1),w())})(s,null===e||void 0===e?void 0:e._id),children:(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("img",{src:null===b||void 0===b?void 0:b.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_20_h_20"}),(0,j.jsx)("textarea",{type:"text",className:"p-2 w-100 mx-2 comment-txt",name:"reply",placeholder:"Reply...",defaultValue:"",onChange:e=>g(e.target.value)}),(0,j.jsx)("button",{type:"submit",className:"reply-btn",children:"Reply"}),(0,j.jsx)("button",{type:"reset",id:"reset",className:"d-none",children:"reset"})]})})})]})})})):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("h3",{className:"bg-white rounded p-2 py-4 mb-3",children:"No Comments Found"})}),(0,j.jsx)("div",{className:"bg-white rounded p-2 mb-3",children:(0,j.jsx)("div",{className:"d-flex  justify-content-between",children:(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("img",{src:null===b||void 0===b?void 0:b.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_50_h_50"}),(0,j.jsx)("textarea",{name:"comment",value:f,onChange:e=>N(e.target.value),placeholder:"Add a comment\u2026",id:"",className:"comment-inbox m-2 p-2"}),(0,j.jsx)("button",{onClick:async e=>{if(e.preventDefault(),f.trim().length<=0)return h().fire({toast:!0,icon:"warning",position:"top-end",title:"Please enter a comment",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),!1;let s=localStorage.getItem("myot_admin_id"),{data:t}=await(0,o.X6)({comment:f,templete_Id:y,creator_Id:s});null!==t&&void 0!==t&&t.error||(h().fire({toast:!0,icon:"success",position:"top-end",title:"Comment added",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),N(""))},className:"reply-btn",children:"Send"})]})})})]}),(0,j.jsxs)("div",{className:"footer bg-white",children:[(0,j.jsx)("div",{children:"\xa9 2023 MYOT"}),(0,j.jsxs)("div",{className:"d-flex ",children:[(0,j.jsx)("p",{className:"ms-3",children:"About"}),(0,j.jsx)("p",{className:"ms-3",children:"Support"}),(0,j.jsx)("p",{className:"ms-3",children:"Contact Us"})]})]})]}),(0,j.jsx)("div",{className:"col",children:(0,j.jsx)(a.Z,{})})]})})})}}}]);
//# sourceMappingURL=949.9c516d07.chunk.js.map