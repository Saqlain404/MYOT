"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[9258],{5839:(e,t,r)=>{r.d(t,{$g:()=>i,AA:()=>h,Jx:()=>d,Tk:()=>g,WZ:()=>f,Z7:()=>p,cA:()=>m,gF:()=>l,qD:()=>u});var a=r(42611),n=r(29655),o=r(2477),s=r(21830),c=r.n(s);async function i(e){try{const{data:c,headers:i}=await a.Z.post("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/company/login"),e);var t,r,o,s;if(null===c||void 0===c||!c.error)return localStorage.setItem("myot_admin_id",null===c||void 0===c||null===(t=c.results)||void 0===t||null===(r=t.employee)||void 0===r?void 0:r._id),await localStorage.removeItem("token-company"),await localStorage.setItem("token-company",i["x-auth-token-company"]),await localStorage.setItem("user_id",null===c||void 0===c||null===(o=c.results)||void 0===o||null===(s=o.employee)||void 0===s?void 0:s._id),{data:c};n.Am.error(c.message)}catch(c){return c.response&&n.Am.error(c.response.data.message),{error:c}}}async function l(e){try{const{data:t}=await a.Z.put("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/company/forgotPassword"),e);if(console.log(t),t.error?n.Am.error(t.message):await localStorage.removeItem("token-admin"),!t.error)return{data:t}}catch(t){return t.response&&n.Am.error(t.response.data.message),{error:t}}}async function u(e){try{const{data:t}=await a.Z.put("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/company/verifyOTP"),e);if(console.log(t),t.error?n.Am.error(t.message):n.Am.success(t.message),!t.error)return{data:t}}catch(t){return t.response&&n.Am.error(t.response.data.message),{error:t}}}async function m(e){try{const{data:t}=await a.Z.put("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/company/updatePassword"),e);if(console.log(t),t.error?n.Am.error(t.message):n.Am.success(t.message),!t.error)return{data:t}}catch(t){return t.response&&n.Am.error(t.response.data.message),{error:t}}}async function d(e){try{const{data:t}=await a.Z.post("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/company/signup  "),e);return null!==t&&void 0!==t&&t.error?(c().fire({toast:!0,icon:"error",position:"top-end",title:null===t||void 0===t?void 0:t.message,showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),{data:t}):{data:t}}catch(t){return t.response&&c().fire({toast:!0,icon:"error",position:"top-end",title:t.response.data.message,showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),{error:t}}}async function p(e){try{const{data:t,headers:r}=await o.Z.post("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/admin/login"),e);return console.log("login Data",t),t.error?(n.Am.error(t.message),{data:t}):(await localStorage.removeItem("token-main-admin"),await localStorage.setItem("token-main-admin",r["x-auth-token-admin"]),{data:t})}catch(t){return t.response&&n.Am.error(t.response.data.message),{error:t}}}async function f(e){try{const{data:t}=await o.Z.post("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/admin/forgotPassword"),e);if(console.log(t),t.error?n.Am.error(t.message):await localStorage.removeItem("token-main-admin"),!t.error)return{data:t}}catch(t){return t.response&&n.Am.error(t.response.data.message),{error:t}}}async function g(e){try{const{data:t}=await o.Z.post("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/admin/verifyOTP"),e);if(console.log(t),t.error&&n.Am.error(t.message),!t.error)return{data:t}}catch(t){return t.response&&n.Am.error(t.response.data.message),{error:t}}}async function h(e){try{const{data:t}=await o.Z.post("".concat("http://ec2-51-112-25-93.me-central-1.compute.amazonaws.com:2053","/api/admin/updatePassword"),e);if(console.log(t),t.error&&n.Am.error(t.message),!t.error)return{data:t}}catch(t){return t.response&&n.Am.error(t.response.data.message),{error:t}}}},99258:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var a=r(72791),n=r(57689),o=r(5839),s=r(56645),c=r(29655),i=r(81161),l=r(11632),u=r(9806),m=r(80184);const d=()=>{const[e,t]=(0,a.useState)("EmailForm"),[r,d]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[g,h]=(0,a.useState)(0),[v,y]=(0,a.useState)(!1),x=(0,n.s0)();(0,a.useEffect)((()=>{g>0&&setTimeout((()=>h(g-1)),1e3)}),[g]);const w=async e=>{e.preventDefault(),y(!0);try{let{data:e}=await(0,o.gF)({email:r});console.log(e),!e||null!==e&&void 0!==e&&e.error||(y(!1),c.Am.success("OTP sent successfully"),t("OTPform"))}catch(a){console.log(a)}finally{y(!1)}};return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-sidebartype":"full","data-sidebar-position":"fixed","data-header-position":"fixed",children:(0,m.jsx)("div",{children:(0,m.jsx)("div",{children:(0,m.jsx)("div",{className:"",children:(0,m.jsx)("div",{className:"",children:(0,m.jsx)("div",{className:"reset-pass-body",children:(0,m.jsxs)("div",{className:"card-forgot",children:[(0,m.jsx)("img",{src:"/images/Ellipse-forgot-pass.png",alt:""}),"EmailForm"===e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("h2",{className:" mb-3 d-flex justify-content-center recover-text",children:"Recover"}),(0,m.jsx)("p",{className:"reset-pass-desc",children:"No worries, we\u2019ll send you reset instructions."})]}),(0,m.jsxs)("form",{children:[(0,m.jsxs)("div",{className:"mb-3 input_icon_container",children:[(0,m.jsx)("div",{className:r?"input_icons":"text-danger input_icons",children:(0,m.jsx)(u.G,{icon:l.FU$})}),(0,m.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),(0,m.jsx)("input",{type:"email",placeholder:"Enter your email address",className:"form-control w-100",required:!0,value:r,onChange:e=>d(e.target.value)})]}),(0,m.jsx)(i.Z,{loading:v,appearance:"primary",className:"btn py-8 mb-3 form-reset",type:"submit",onClick:e=>w(e),disabled:!r,children:"Submit"})]})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("h2",{className:" mb-3 d-flex justify-content-center recover-text",children:"OTP Verification"}),(0,m.jsxs)("p",{className:"reset-pass-desc",children:["Enter OTP Code sent to ",r.substring(0,3),"*".repeat(r.length-6),r.slice(-3)]})]}),(0,m.jsxs)("form",{onSubmit:e=>(async e=>{if(e.preventDefault(),y(!0),p.length<4)return c.Am.error("OTP must be 4 digits",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),y(!1),!1;try{let{data:e}=await(0,o.qD)({email:r,otp:p});!e||null!==e&&void 0!==e&&e.error||(y(!1),x("/Update-password",{state:{email:r}}))}catch(t){console.log(t)}finally{y(!1)}})(e),children:[(0,m.jsx)("div",{className:"otp-input-box",children:(0,m.jsx)(s.Z,{inputType:"tel",value:p,onChange:f,numInputs:4,onChangeRegex:/^([0-9]{0,})$/,renderSeparator:(0,m.jsx)("span",{children:"\xa0\xa0\xa0\xa0"}),isInputNum:!0,inputStyle:"otp-field__input",containerStyle:"form-group",renderInput:e=>(0,m.jsx)("input",{...e})})}),(0,m.jsx)(i.Z,{loading:v,appearance:"primary",className:"btn py-8 my-3 form-reset",type:"submit",disabled:4!==p.length,children:"Verify OTP"})]}),(0,m.jsxs)("p",{children:["Don\u2019t received OTP code?"," ",g?(0,m.jsxs)("span",{className:"count_Sec",children:["Resend after 00:",g]}):(0,m.jsx)("span",{className:"otp-sec mx-1 text-primary",id:"resendOTP",onClick:e=>(async e=>{w(e),h(60),e.preventDefault()})(e),style:{cursor:"pointer"},children:(0,m.jsx)("b",{children:"Request again"})})]})]})]})})})})})})})})}},56645:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(72791),n=function(e){return"object"===typeof e&&null!==e},o=function(e){var t=e.value,r=void 0===t?"":t,o=e.numInputs,s=void 0===o?4:o,c=e.onChange,i=e.onPaste,l=e.renderInput,u=e.shouldAutoFocus,m=void 0!==u&&u,d=e.inputType,p=void 0===d?"text":d,f=e.renderSeparator,g=e.placeholder,h=e.containerStyle,v=e.inputStyle,y=e.skipDefaultStyles,x=void 0!==y&&y,w=a.useState(0),j=w[0],b=w[1],A=a.useRef([]),N=function(){return r?r.toString().split(""):[]},S="number"===p||"tel"===p;a.useEffect((function(){A.current=A.current.slice(0,s)}),[s]),a.useEffect((function(){var e;m&&(null===(e=A.current[0])||void 0===e||e.focus())}),[m]);var k=function(){if("string"===typeof g){if(g.length===s)return g;g.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},P=function(e){return(S?!isNaN(Number(e)):"string"===typeof e)&&1===e.trim().length},D=function(e){var t=e.target.value;P(t)&&(Z(t),O(j+1))},C=function(e){var t=e.nativeEvent,r=e.target.value;if(!P(r)){if(r.length===s)r.split("").some((function(e){return!P(e)}))||(E(r.split("")),O(s-1));null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),Z(""),O(j-1)),e.target.value=""}},I=function(){b(j-1)},T=function(e){var t=N();[e.code,e.key].includes("Backspace")?(e.preventDefault(),Z(""),O(j-1)):"Delete"===e.code?(e.preventDefault(),Z("")):"ArrowLeft"===e.code?(e.preventDefault(),O(j-1)):"ArrowRight"===e.code||e.key===t[j]?(e.preventDefault(),O(j+1)):"Spacebar"!==e.code&&"Space"!==e.code&&"ArrowUp"!==e.code&&"ArrowDown"!==e.code||e.preventDefault()},O=function(e){var t,r,a=Math.max(Math.min(s-1,e),0);A.current[a]&&(null===(t=A.current[a])||void 0===t||t.focus(),null===(r=A.current[a])||void 0===r||r.select(),b(a))},Z=function(e){var t=N();t[j]=e[0],E(t)},E=function(e){var t=e.join("");c(t)},F=function(e){var t;e.preventDefault();var r=N(),a=j,n=e.clipboardData.getData("text/plain").slice(0,s-j).split("");if(!S||!n.some((function(e){return isNaN(Number(e))}))){for(var o=0;o<s;++o)o>=j&&n.length>0&&(r[o]=null!==(t=n.shift())&&void 0!==t?t:"",a++);O(a),E(r)}};return a.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},n(h)&&h),className:"string"===typeof h?h:void 0,onPaste:i},Array.from({length:s},(function(e,t){return t})).map((function(e){var t,r,o;return a.createElement(a.Fragment,{key:e},l({value:null!==(t=N()[e])&&void 0!==t?t:"",placeholder:null!==(o=null===(r=k())||void 0===r?void 0:r[e])&&void 0!==o?o:void 0,ref:function(t){return A.current[e]=t},onChange:D,onFocus:function(t){return function(e){return function(t){b(t),e.target.select()}}(t)(e)},onBlur:I,onKeyDown:T,onPaste:F,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(x?{}:{width:"1em",textAlign:"center"},n(v)?v:{}),className:"string"===typeof v?v:void 0,type:p,inputMode:S?"numeric":"text",onInput:C},e),e<s-1&&("function"===typeof f?f(e):f))})))}}}]);
//# sourceMappingURL=9258.7e58db51.chunk.js.map