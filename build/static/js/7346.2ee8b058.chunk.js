"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[7346],{37346:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var l=s(72791),t=(s(54347),s(11087)),i=s(89542),d=s(58400),n=s(72426),c=s.n(n),o=(s(29655),s(78709)),r=s(81161),m=(s(21830),s(80184));const x=()=>{var e,a,s,n,x,h;const[v,p]=(0,l.useState)(),[u,b]=(0,l.useState)(),[j,g]=(0,l.useState)("All"),[N,f]=(0,l.useState)(""),[k,w]=(0,l.useState)(""),[y,A]=(0,l.useState)([]),[C,_]=(0,l.useState)(null),S=localStorage.getItem("user_id")||localStorage.getItem("myot_admin_id"),T=e=>{switch(g(e),e){case"New":(async()=>{let e=await(0,o.$q)(S);null===e||void 0===e||e.sort(((e,a)=>new Date(null===a||void 0===a?void 0:a.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt))),null!==e&&void 0!==e&&e.error||p(e)})();break;case"Ongoing":(async()=>{let e=await(0,d.nv)(S);null===e||void 0===e||e.sort(((e,a)=>new Date(null===a||void 0===a?void 0:a.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt))),console.log(e),null!==e&&void 0!==e&&e.error||p(e)})();break;case"Resolved":(async()=>{let e=await(0,o.JB)(S);null===e||void 0===e||e.sort(((e,a)=>new Date(null===a||void 0===a?void 0:a.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt))),console.log(e),null!==e&&void 0!==e&&e.error||p(e)})();break;default:D()}},D=async()=>{var e;let a=localStorage.getItem("user_id");b(a);const s=await(0,d.tB)(S);null===(e=s[0])||void 0===e||e.sort(((e,a)=>new Date(null===a||void 0===a?void 0:a.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt))),p(s)};return(0,l.useEffect)((()=>{D()}),[]),(0,l.useEffect)((()=>{}),[v]),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"container-fluid",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-2 sidebar",children:(0,m.jsx)(i.Z,{})}),(0,m.jsxs)("div",{className:"col middle-content bg-body-tertiary p-0 min-vh-100",children:[(0,m.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,m.jsxs)("nav",{className:"row header bg-white  ",children:[(0,m.jsx)("ul",{className:"col align-items-center mt-3",children:(0,m.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,m.jsx)("a",{className:"nav-link fw-bold ms-2",children:"Help / Help & Support"})})}),(0,m.jsx)("div",{className:"col d-flex align-items-center  justify-content-end",children:(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,m.jsx)(t.rU,{to:"/Approver/Chat",children:(0,m.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,m.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})})]})}),(0,m.jsx)("div",{className:"container px-4 text-center min-vh-100 ",children:(0,m.jsxs)("div",{className:"row bg-white rounded  p-4 m-4",children:[(0,m.jsxs)("div",{className:"col-12 d-flex justify-content-between",children:[(0,m.jsxs)("div",{className:"d-flex mt-2",children:[(0,m.jsx)(t.rU,{to:"/Approver/Help",className:"text-decoration-none",children:(0,m.jsx)("p",{className:"th-text  me-3",children:"Template Guidelines"})}),(0,m.jsx)(t.rU,{to:"/Approver/Help-Support",className:"text-decoration-none",children:(0,m.jsx)("p",{className:"td-text border-bottom me-3",children:"Help & Support"})}),(0,m.jsx)(t.rU,{to:"/Approver/Contact-us",className:"text-decoration-none",children:(0,m.jsx)("p",{className:"th-text",children:"Contact Us"})})]}),(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,m.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-dialog-department",children:(0,m.jsxs)("div",{class:"modal-content border-0",children:[(0,m.jsxs)("div",{class:"d-flex modal-header border-bottom",children:[(0,m.jsx)("p",{class:"",id:"exampleModalLabel",children:"Create New Ticket"}),(0,m.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,m.jsxs)("form",{action:"",onSubmit:async e=>{e.preventDefault();let a=localStorage.getItem("myot_admin_id"),s=new FormData;s.append("ticketType",N),s.append("ticketIssue",k),s.append("creator_Id",a),s.append("document",null===y||void 0===y?void 0:y.attachment);const l=await(0,d._2)(s);null!==l&&void 0!==l&&l.error||(f(""),A([]),w(""),D())},children:[(0,m.jsxs)("div",{className:"row p-3",children:[(0,m.jsx)("div",{className:"col-12 mb-3 d-flex",children:(0,m.jsxs)("div",{className:"col-12 ps-2",children:[(0,m.jsx)("p",{className:"d-flex ms-1",id:"exampleModalLabel",children:"Title"}),(0,m.jsx)("input",{type:"text",placeholder:"Title *",className:"col-12 modal-input td-text w-100 p-2",name:"request type",value:N,onChange:e=>f(e.target.value)})]})}),(0,m.jsx)("p",{className:"d-flex ms-2",id:"exampleModalLabel",children:"Description"}),(0,m.jsx)("div",{className:"col-12 mb-3",children:(0,m.jsx)("textarea",{style:{minHeight:"100px"},type:"text",placeholder:"Type ticket issue here...",className:"col-12 modal-input td-text p-2",name:"message",value:k,onChange:e=>w(e.target.value)})}),(0,m.jsx)("p",{className:"d-flex ms-2 mb-1",children:"Attachment ( if Any )"}),(0,m.jsx)("div",{className:"col-12 mb-3",children:(0,m.jsx)("input",{type:"file",className:"col-12 modal-input td-text p-2",name:"attachment",accept:".pdf, .png, .jpg, .jpeg",defaultValue:"",onChange:e=>(async(e,a)=>{A({...y,[a]:e.target.files[0]})})(e,"attachment")})})]}),(0,m.jsxs)("div",{className:"d-flex justify-content-end mb-3",children:[(0,m.jsx)(r.Z,{style:{width:"100px"},appearance:"primary",type:"submit",className:"btn mb-3 me-2 rounded-2","data-bs-dismiss":"modal",disabled:!N||!k,children:"Send"}),(0,m.jsx)(r.Z,{style:{width:"100px"},type:"button","data-bs-dismiss":"modal","aria-label":"Close",className:"btn mb-3 me-2 rounded-2",children:"Cancel"})]})]})]})})}),(0,m.jsx)(t.rU,{className:"text-decoration-none","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:(0,m.jsx)("button",{className:"help-support-btn",children:"New Ticket"})})]})]}),(0,m.jsx)("p",{className:"help-support-heading mt-3",children:"Get in Touch"}),(0,m.jsx)("p",{className:"help-support-text mb-3",children:"Please get in touch and we will be happy to help you. Create New tickets"}),(0,m.jsx)("div",{className:"col-12 d-flex",children:(0,m.jsxs)("ul",{className:"nav nav-tabs mb-5",id:"ex1",role:"tablist",children:[(0,m.jsx)("li",{className:"nav-item",role:"presentation",children:(0,m.jsx)("a",{className:"nav-link ".concat("All"===j?"active":""),id:"ex1-tab-1","data-bs-toggle":"tab",href:"#ex1-tabs-1",role:"tab","aria-controls":"ex1-tabs-1","aria-selected":"true",onClick:()=>T("All"),children:"All Tickets"})}),(0,m.jsx)("li",{className:"nav-item",role:"presentation",children:(0,m.jsx)("a",{className:"nav-link ".concat("New"===j?"active":""),id:"ex1-tab-2","data-bs-toggle":"tab",href:"#ex1-tabs-2",role:"tab","aria-controls":"ex1-tabs-2","aria-selected":"false",onClick:()=>T("New"),children:"New Tickets"})}),(0,m.jsx)("li",{className:"nav-item",role:"presentation",children:(0,m.jsx)("a",{className:"nav-link ".concat("Ongoing"===j?"active":""),id:"ex1-tab-3","data-bs-toggle":"tab",href:"#ex1-tabs-3",role:"tab","aria-controls":"ex1-tabs-3","aria-selected":"false",onClick:()=>T("Ongoing"),children:"Ongoing Tickets"})}),(0,m.jsx)("li",{className:"nav-item",role:"presentation",children:(0,m.jsx)("a",{className:"nav-link ".concat("Resolved"===j?"active":""),id:"ex1-tab-4","data-bs-toggle":"tab",href:"#ex1-tabs-4",role:"tab","aria-controls":"ex1-tabs-4","aria-selected":"false",onClick:()=>T("Resolved"),children:"Resolved Tickets"})})]})}),(0,m.jsx)("div",{className:"col-12",children:null!==v&&void 0!==v&&v[0]&&(null===v||void 0===v||null===(e=v[0])||void 0===e?void 0:e.length)>0?null===v||void 0===v||null===(a=v[0])||void 0===a?void 0:a.map(((e,a)=>{var s,l,t;return(0,m.jsxs)("div",{className:"col rounded border bg-white mb-3 p-2",children:[(0,m.jsxs)("div",{className:"d-flex border-bottom d-flex justify-content-between",children:[(0,m.jsxs)("div",{className:"ps-2 pe-4",children:[(0,m.jsxs)("div",{className:"d-flex mb-3",children:["In Progress"===(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("img",{src:"/images/dashboard/orange-ticket-ball.svg",alt:"",className:"me-2"}):"Pending"===(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("img",{src:"/images/dashboard/blue-ticket-ball.svg",alt:"",className:"me-2"}):"Completed"===e.status?(0,m.jsx)("img",{src:"/images/dashboard/green-ticket-ball.svg",alt:"",className:"me-2"}):null,(0,m.jsx)("p",{className:"ticket-number m-1",children:e.ticketType})]}),(0,m.jsx)("div",{className:" mt-1",children:(0,m.jsx)("p",{className:"ticket-question td-text mb-3 ms-5",children:e.ticketIssue})})]}),(0,m.jsxs)("p",{className:"ticket-post-time mt-2",children:["Posted At ",(0,m.jsx)("br",{}),c()(e.createdAt).calendar()]})]}),(0,m.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)("img",{src:null!==e&&void 0!==e&&null!==(s=e.creator_Id)&&void 0!==s&&s.profile_Pic?null===e||void 0===e||null===(l=e.creator_Id)||void 0===l?void 0:l.profile_Pic:"/images/dashboard/Avatar2.png",alt:"",className:"m-2 w_20_h_20"}),(0,m.jsx)("p",{className:"th-text m-auto text-capitalize",children:null===e||void 0===e||null===(t=e.creator_Id)||void 0===t?void 0:t.name})]}),(0,m.jsxs)("div",{className:"d-flex align-items-center",children:[(null===e||void 0===e?void 0:e.document)&&(0,m.jsx)("a",{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",className:"ticket-link mt-3 mx-2 cursor_pointer",onClick:()=>(e=>{_(e),console.log(v)})(a),children:"See Attachement"}),(0,m.jsx)("a",{className:"ticket-link mt-3 me-1 cursor_pointer",children:"Open Ticket"})]})]})]},e._id)})):(0,m.jsx)("p",{className:"fs-5",children:"Yay!, no tickets"})}),(0,m.jsx)("div",{class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,m.jsx)("div",{class:"modal-dialog",children:(0,m.jsxs)("div",{class:"modal-content",children:[(0,m.jsxs)("div",{class:"modal-header",children:[(0,m.jsx)("p",{className:"fs-6",children:"Attachment"}),(0,m.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,m.jsx)("div",{class:"modal-body",children:(0,m.jsxs)("div",{children:[console.log(v),null!==C&&null!==(s=v[0])&&void 0!==s&&null!==(n=s[C])&&void 0!==n&&n.document?(0,m.jsx)("img",{src:null===(x=v[0])||void 0===x||null===(h=x[C])||void 0===h?void 0:h.document,alt:"Attachment",style:{width:"100%",objectFit:"cover"}}):null]})})]})})})]})})]})]})})})}}}]);
//# sourceMappingURL=7346.2ee8b058.chunk.js.map