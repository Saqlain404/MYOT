"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[963],{963:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(72791),a=t(57689),i=t(11087),n=t(72426),o=t.n(n),r=t(54347),c=t(39040),d=t(28113),m=t(21830),x=t.n(m),h=t(64581),u=t(59434),v=t(80184);const j=()=>{const[e,s]=(0,l.useState)([]),[t,n]=(0,l.useState)(!1),[m,j]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[f,N]=(0,l.useState)(""),[b,y]=(0,l.useState)(),w=(0,u.v9)(h.tT),{id:_}=(0,a.UO)();(0,l.useEffect)((()=>{k()}),[]);const k=async()=>{try{let t=localStorage.getItem("myot_admin_id");y(t);let{data:l}=await(0,d.Uv)(_);var e;if(null===l||void 0===l||!l.error)s(null===l||void 0===l||null===(e=l.results)||void 0===e?void 0:e.commentDetailsList),console.log(null===l||void 0===l?void 0:l.results)}catch(t){console.log(t)}};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"container-fluid",children:(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-2 sidebar",children:(0,v.jsx)(r.Z,{})}),(0,v.jsxs)("div",{className:"col-7 middle-content bg-body-tertiary p-0 min-vh-100",children:[(0,v.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,v.jsxs)("nav",{className:"row header bg-white  ",children:[(0,v.jsx)("ul",{className:"col align-items-center mt-3",children:(0,v.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,v.jsx)("a",{className:"nav-link fw-bold",children:" Requests / Comments"})})}),(0,v.jsxs)("div",{className:"col-7 d-flex align-items-center  justify-content-end",children:[(0,v.jsx)("form",{className:"",role:"search",children:(0,v.jsx)("input",{className:"form-control search-bar",type:"search",placeholder:"Search","aria-label":"Search"})}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,v.jsx)(i.rU,{to:"/Admin/Chat",children:(0,v.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,v.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})]})]})}),(0,v.jsxs)("div",{className:"container px-4 text-center min-vh-100 ",children:[(0,v.jsx)("p",{className:"templates-leave mt-3  d-flex ",children:"Comments"}),e&&(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e.map(((e,s)=>{var l,a,r;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"bg-white rounded p-2 mb-3",children:[(0,v.jsxs)("div",{className:"d-flex  justify-content-between",children:[(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("img",{src:null!==e&&void 0!==e&&null!==(l=e.creator_Id)&&void 0!==l&&l.profile_Pic?null===e||void 0===e||null===(a=e.creator_Id)||void 0===a?void 0:a.profile_Pic:"/images/dashboard/Avatar.png",alt:"",className:"m-2 w_20_h_20"}),(0,v.jsx)("p",{className:"commenter-name m-auto text-capitalize",children:null===e||void 0===e||null===(r=e.creator_Id)||void 0===r?void 0:r.name}),(0,v.jsx)("p",{className:"comment-time m-auto",children:o()(null===e||void 0===e?void 0:e.createdAt).calendar()})]}),(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,v.jsx)("div",{className:"cursor_pointer d-flex align-items-center",onClick:()=>(e=>{n((s=>({...Object.fromEntries(Object.entries(s).map((e=>{let[s]=e;return[s,!1]}))),[e]:!s[e]})))})(s),children:t[s]?(0,v.jsx)(i.rU,{className:"ticket-link me-1 text-decoration-none",children:"Cancel"}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("img",{src:"/images/dashboard/reply-arrow.svg",className:"me-1"}),(0,v.jsx)(i.rU,{className:"ticket-link me-1 text-decoration-none",children:"Reply"})]})}),(0,v.jsxs)("div",{onClick:s=>(async(e,s)=>{e.preventDefault();try{let{data:e}=await(0,d.ki)(s);null!==e&&void 0!==e&&e.error||(x().fire({toast:!0,icon:"success",position:"top-end",title:"Comment deleted successfully",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),k())}catch(t){console.log(t)}})(s,null===e||void 0===e?void 0:e._id),className:"ms-2",children:[(0,v.jsx)("img",{src:"/images/icons/delete_icon.png",className:"me-1"}),(0,v.jsx)(i.rU,{className:"ticket-link me-1 text-decoration-none text-danger",children:"Delete"})]})]})]}),(0,v.jsx)("p",{className:"comment-txt p-2 mb-0",children:null===e||void 0===e?void 0:e.comment}),(null===e||void 0===e?void 0:e.replyText)&&(0,v.jsx)("div",{style:{borderLeft:"2px solid #f8f9fa"},className:"text-start ms-5",children:null===e||void 0===e?void 0:e.replyText.map((e=>{var s,t;return(0,v.jsx)("div",{className:"bg-white p-2 mb-3",children:(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)("img",{className:"w_20_h_20 me-1",src:null===e||void 0===e||null===(s=e.creator_Id)||void 0===s?void 0:s.profile_Pic,alt:""}),(0,v.jsx)("p",{className:"commenter-name my-auto text-capitalize",children:null===e||void 0===e||null===(t=e.creator_Id)||void 0===t?void 0:t.name})]}),(0,v.jsx)("p",{className:"comment-txt p-2 mb-0",children:null===e||void 0===e?void 0:e.text})]}),(0,v.jsx)("div",{})]})})}))}),t[s]&&(0,v.jsx)("div",{className:"bg-white rounded p-2 my-3 task_reply",children:(0,v.jsx)("form",{onSubmit:s=>(async(e,s)=>{if(e.preventDefault(),f.trim().length<=0)return x().fire({toast:!0,icon:"warning",position:"top-end",title:"Please enter reply",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),!1;let t={creator_Id:b,comment_Id:s,text:f};console.log(t);let{data:l}=await(0,d.uT)(t);console.log(l),null!==l&&void 0!==l&&l.error||(x().fire({toast:!0,icon:"success",position:"top-end",title:"New comment added",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),document.getElementById("reset").click(),j(""),n(!1),k())})(s,null===e||void 0===e?void 0:e._id),children:(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("img",{src:null===w||void 0===w?void 0:w.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_20_h_20"}),(0,v.jsx)("textarea",{type:"text",className:"p-2 w-100 mx-2 comment-txt",name:"reply",placeholder:"Reply...",defaultValue:"",onChange:e=>N(e.target.value)}),(0,v.jsx)("button",{type:"submit",className:"reply-btn",children:"Reply"}),(0,v.jsx)("button",{type:"reset",id:"reset",className:"d-none",children:"reset"})]})})})]})})})):(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("h3",{className:"bg-white rounded p-2 py-4 mb-3",children:"No Comments Found"})}),(0,v.jsx)("div",{className:"bg-white rounded p-2 mb-3",children:(0,v.jsx)("div",{className:"d-flex  justify-content-between",children:(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("img",{src:null===w||void 0===w?void 0:w.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_50_h_50"}),(0,v.jsx)("textarea",{name:"comment",value:p,onChange:e=>g(e.target.value),placeholder:"Add a comment\u2026",id:"",className:"comment-inbox m-2 p-2"}),(0,v.jsx)("button",{onClick:async e=>{if(e.preventDefault(),console.log(_),p.trim().length<=0)return x().fire({toast:!0,icon:"warning",position:"top-end",title:"Please enter reply",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),!1;try{let e={creator_Id:localStorage.getItem("myot_admin_id"),document_Id:_,comment:p};console.log(e);let{data:s}=await(0,d.Id)(e);console.log(s),null!==s&&void 0!==s&&s.error||(x().fire({toast:!0,icon:"success",position:"top-end",title:"New comment added",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),g(""),k())}catch(s){}},className:"reply-btn",children:"Send"})]})})})]}),(0,v.jsxs)("div",{className:"footer bg-white",children:[(0,v.jsx)("div",{children:"\xa9 2023 MYOT"}),(0,v.jsxs)("div",{className:"d-flex ",children:[(0,v.jsx)("p",{className:"ms-3",children:"About"}),(0,v.jsx)("p",{className:"ms-3",children:"Support"}),(0,v.jsx)("p",{className:"ms-3",children:"Contact Us"})]})]})]}),(0,v.jsx)("div",{className:"col",children:(0,v.jsx)(c.Z,{})})]})})})}}}]);
//# sourceMappingURL=963.d80745a0.chunk.js.map