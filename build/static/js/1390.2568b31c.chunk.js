"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[1390],{71390:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(72791),a=t(39040),i=t(54347),n=t(57689),r=t(11087),o=t(28113),c=t(72426),d=t.n(c),m=t(29655),h=t(21830),x=t.n(h),v=t(59434),u=t(64581),p=t(80184);const j=()=>{const[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)(!1),[h,j]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),N=(0,v.v9)(u.tT),{id:b}=(0,n.UO)();(0,l.useEffect)((()=>{y()}),[]);const y=async()=>{try{let{data:l}=await(0,o.zf)(b);var e,t;if(null===l||void 0===l||!l.error)s(null===l||void 0===l||null===(e=l.results)||void 0===e?void 0:e.commentDetails),console.log(null===l||void 0===l||null===(t=l.results)||void 0===t?void 0:t.commentDetails)}catch(l){console.log(l)}};return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"container-fluid",children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-2 sidebar",children:(0,p.jsx)(i.Z,{})}),(0,p.jsxs)("div",{className:"col-7 middle-content bg-body-tertiary p-0 min-vh-100",children:[(0,p.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,p.jsxs)("nav",{className:"row header bg-white  ",children:[(0,p.jsx)("ul",{className:"col align-items-center mt-3",children:(0,p.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,p.jsx)("a",{className:"nav-link fw-bold",children:" Comments"})})}),(0,p.jsxs)("div",{className:"col-7 d-flex align-items-center  justify-content-end",children:[(0,p.jsx)("form",{className:"",role:"search",children:(0,p.jsx)("input",{className:"form-control search-bar",type:"search",placeholder:"Search","aria-label":"Search"})}),(0,p.jsxs)("div",{className:"",children:[(0,p.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,p.jsx)(r.rU,{to:"/Admin/Chat",children:(0,p.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,p.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})]})]})}),(0,p.jsxs)("div",{className:"container px-4 text-center min-vh-100 ",children:[(0,p.jsx)("p",{className:"templates-leave mt-3  d-flex ",children:"Comments"}),e&&(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e.map(((e,s)=>{var l,a,i;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"bg-white rounded p-2 mb-3",children:[(0,p.jsxs)("div",{className:"d-flex  justify-content-between",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("img",{src:null!==e&&void 0!==e&&null!==(l=e.creator_Id)&&void 0!==l&&l.profile_Pic?null===e||void 0===e||null===(a=e.creator_Id)||void 0===a?void 0:a.profile_Pic:"/images/dashboard/Avatar.png",alt:"",className:"m-2 w_20_h_20"}),(0,p.jsx)("p",{className:"commenter-name m-auto text-capitalize",children:null===e||void 0===e||null===(i=e.creator_Id)||void 0===i?void 0:i.name}),(0,p.jsx)("p",{className:"comment-time m-auto",children:d()(null===e||void 0===e?void 0:e.createdAt).calendar()})]}),(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,p.jsx)("div",{className:"cursor_pointer d-flex align-items-center",onClick:()=>(e=>{c((s=>({...Object.fromEntries(Object.entries(s).map((e=>{let[s]=e;return[s,!1]}))),[e]:!s[e]})))})(s),children:t[s]?(0,p.jsx)(r.rU,{className:"ticket-link me-1 text-decoration-none",children:"Cancel"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("img",{src:"/images/dashboard/reply-arrow.svg",className:"me-1"}),(0,p.jsx)(r.rU,{className:"ticket-link me-1 text-decoration-none",children:"Reply"})]})}),(0,p.jsxs)("div",{onClick:s=>(async(e,s)=>{e.preventDefault();try{let{data:e}=await(0,o.xz)(s);e&&!e.error&&(x().fire({toast:!0,icon:"success",position:"top-end",title:"Comment deleted successfully",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),y())}catch(t){console.log(t)}})(s,null===e||void 0===e?void 0:e._id),className:"ms-2",children:[(0,p.jsx)("img",{src:"/images/icons/delete_icon.png",className:"me-1"}),(0,p.jsx)(r.rU,{className:"ticket-link me-1 text-decoration-none text-danger",children:"Delete"})]})]})]}),(0,p.jsx)("p",{className:"comment-txt p-2 mb-0",children:null===e||void 0===e?void 0:e.comment}),(null===e||void 0===e?void 0:e.replyText)&&(0,p.jsx)("div",{style:{borderLeft:"2px solid #f8f9fa"},className:"text-start ms-5",children:null===e||void 0===e?void 0:e.replyText.map((e=>{var s,t;return(0,p.jsx)("div",{className:"bg-white p-2 mb-3",children:(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("img",{className:"w_20_h_20 me-1",src:null===e||void 0===e||null===(s=e.creator_Id)||void 0===s?void 0:s.profile_Pic,alt:""}),(0,p.jsx)("p",{className:"commenter-name my-auto text-capitalize",children:null===e||void 0===e||null===(t=e.creator_Id)||void 0===t?void 0:t.name})]}),(0,p.jsx)("p",{className:"comment-txt p-2 mb-0",children:null===e||void 0===e?void 0:e.text})]}),(0,p.jsx)("div",{})]})})}))}),t[s]&&(0,p.jsx)("div",{className:"bg-white rounded p-2 my-3 task_reply",children:(0,p.jsx)("form",{onSubmit:s=>(async(e,s)=>{if(e.preventDefault(),h.trim().length<=0)return x().fire({toast:!0,icon:"warning",position:"top-end",title:"Please enter reply",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),!1;let t=localStorage.getItem("myot_admin_id"),{data:l}=await(0,o.CR)({text:h,comment_Id:s,creator_Id:t});console.log(l),!l||null!==l&&void 0!==l&&l.error||((0,m.Am)("Reply added",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),j(""),c(!1),y())})(s,null===e||void 0===e?void 0:e._id),children:(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("img",{src:null===N||void 0===N?void 0:N.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_20_h_20"}),(0,p.jsx)("textarea",{type:"text",className:"p-2 w-100 mx-2 comment-txt",name:"reply",placeholder:"Reply...",defaultValue:"",onChange:e=>j(e.target.value)}),(0,p.jsx)("button",{type:"submit",className:"reply-btn",children:"Reply"}),(0,p.jsx)("button",{type:"reset",id:"reset",className:"d-none",children:"reset"})]})})})]})})})):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("h3",{className:"bg-white rounded p-2 py-4 mb-3",children:"No Comments Found"})}),(0,p.jsx)("div",{className:"bg-white rounded p-2 mb-3",children:(0,p.jsx)("div",{className:"d-flex  justify-content-between",children:(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("img",{src:null===N||void 0===N?void 0:N.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_50_h_50"}),(0,p.jsx)("textarea",{name:"comment",value:g,onChange:e=>f(e.target.value),placeholder:"Add a comment\u2026",id:"",className:"comment-inbox m-2 p-2"}),(0,p.jsx)("button",{onClick:async e=>{if(e.preventDefault(),g.trim().length<=0)return x().fire({toast:!0,icon:"warning",position:"top-end",title:"Please enter comment",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),!1;let s=localStorage.getItem("myot_admin_id"),{data:t}=await(0,o.SK)({comment:g,templete_Id:b,creator_Id:s});console.log(t),null!==t&&void 0!==t&&t.error||(x().fire({toast:!0,icon:"success",position:"top-end",title:"New comment added",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),y(),f(""))},className:"reply-btn",children:"Send"})]})})})]}),(0,p.jsxs)("div",{className:"footer bg-white",children:[(0,p.jsx)("div",{children:"\xa9 2023 MYOT"}),(0,p.jsxs)("div",{className:"d-flex ",children:[(0,p.jsx)("p",{className:"ms-3",children:"About"}),(0,p.jsx)("p",{className:"ms-3",children:"Support"}),(0,p.jsx)("p",{className:"ms-3",children:"Contact Us"})]})]})]}),(0,p.jsx)("div",{className:"col",children:(0,p.jsx)(a.Z,{})})]})})})}}}]);
//# sourceMappingURL=1390.2568b31c.chunk.js.map