"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[574],{60574:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(72791),l=t(39040),i=t(23773),n=t(57689),c=t(11087),r=t(72426),d=t.n(r),o=t(78709),m=t(59434),x=t(64581),h=t(81161),v=t(21830),u=t.n(v),j=t(80184);const p=()=>{const[e,s]=(0,a.useState)([]),[t,r]=(0,a.useState)(!1),[v,p]=(0,a.useState)(""),[g,N]=(0,a.useState)(""),b=(0,m.v9)(x.tT),{id:f}=(0,n.UO)();console.log(f),(0,a.useEffect)((()=>{y()}),[]);const y=async()=>{try{var e,t;let a=await(0,o.BU)(f);s(null===a||void 0===a||null===(e=a.commentData)||void 0===e?void 0:e.commentView),console.log(null===a||void 0===a||null===(t=a.commentData)||void 0===t?void 0:t.commentView)}catch(a){console.log(a)}},w=e=>{r((s=>{const t={...s};return Object.keys(t).forEach((e=>{t[e]=!1})),t[e]=!s[e],t}))};let _=localStorage.getItem("user_id")||localStorage.getItem("myot_admin_id");return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"container-fluid",children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-2 sidebar",children:(0,j.jsx)(i.Z,{})}),(0,j.jsxs)("div",{className:"col-7 middle-content bg-body-tertiary p-0 min-vh-100",children:[(0,j.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,j.jsxs)("nav",{className:"row header bg-white  ",children:[(0,j.jsx)("ul",{className:"col align-items-center mt-3",children:(0,j.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,j.jsx)("a",{className:"nav-link fw-bold ms-2",children:"Tasks / Comments"})})}),(0,j.jsx)("div",{className:"col-7 d-flex align-items-center  justify-content-end",children:(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,j.jsx)(c.rU,{to:"/Employee/Chat",children:(0,j.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,j.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})})]})}),(0,j.jsxs)("div",{className:"container px-4 text-center min-vh-100 ",children:[e&&(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e.map(((e,s)=>{var a,l;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"bg-white rounded p-2 mb-3",children:[(0,j.jsxs)("div",{className:"d-flex  align-items-center  justify-content-between",children:[(0,j.jsxs)("div",{className:"d-flex  align-items-center justify-content-between",children:[(0,j.jsx)("img",{src:null===e||void 0===e||null===(a=e.creator_Id)||void 0===a?void 0:a.profile_Pic,alt:"",className:"m-2 w_20_h_20"}),(0,j.jsx)("p",{className:"commenter-name text-capitalize ",children:null===e||void 0===e||null===(l=e.creator_Id)||void 0===l?void 0:l.name}),(0,j.jsx)("p",{className:"comment-time m-auto",children:d()(null===e||void 0===e?void 0:e.createdAt).format("MMM Do YY, h:mm a")})]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)("div",{className:"cursor_pointer",onClick:()=>w(s),children:t[s]?(0,j.jsx)(c.rU,{className:"ticket-link mt-3 me-1 text-decoration-none",children:"Cancel"}):(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"align-items-center me-2",children:[(0,j.jsx)("img",{src:"/images/dashboard/reply-arrow.svg",className:"me-1"}),(0,j.jsx)(c.rU,{className:"ticket-link mt-3 text-decoration-none",children:"Reply"})]})})}),(0,j.jsxs)("div",{onClick:s=>(async e=>{await(0,o.UO)(e),setTimeout((()=>{y()}),200)})(null===e||void 0===e?void 0:e._id),className:"ms-2",children:[(0,j.jsx)("img",{src:"/images/icons/delete_icon.png",className:"me-1"}),(0,j.jsx)(c.rU,{className:"ticket-link text-decoration-none text-danger",children:"Delete"})]})]})]}),(0,j.jsx)("p",{className:"comment-txt p-2 mb-0",style:{wordBreak:"break-word"},children:null===e||void 0===e?void 0:e.comment}),(null===e||void 0===e?void 0:e.replyText)&&(0,j.jsx)("div",{style:{borderLeft:"2px solid #f8f9fa"},className:"text-start ms-5",children:null===e||void 0===e?void 0:e.replyText.map((e=>{var s,t;return(0,j.jsx)("div",{className:"bg-white p-2 mb-3",children:(0,j.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)("img",{className:"w_20_h_20 me-3",src:null===e||void 0===e||null===(s=e.creator_Id)||void 0===s?void 0:s.profile_Pic,alt:""}),(0,j.jsx)("p",{className:"commenter-name text-capitalize ",children:null===e||void 0===e||null===(t=e.creator_Id)||void 0===t?void 0:t.name})]}),(0,j.jsx)("p",{className:"comment-txt p-2 mb-0",style:{wordBreak:"break-word"},children:null===e||void 0===e?void 0:e.text})]}),(0,j.jsx)("div",{})]})})}))}),t[s]&&(0,j.jsx)("div",{className:"bg-white rounded p-2 my-3 task_reply",children:(0,j.jsx)("form",{onSubmit:s=>(async(e,s)=>{e.preventDefault();const t=g.trim();(await(0,o.Ki)({text:t,comment_Id:s,creator_Id:_})).error?""===t&&u().fire({toast:!0,icon:"error",position:"top-end",title:"Please Enter Reply",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}):(N(""),y()),document.getElementById("reset").click(),y(),w(s)})(s,null===e||void 0===e?void 0:e._id),children:(0,j.jsxs)("div",{className:"d-flex  align-items-center justify-content-between",children:[(0,j.jsx)("img",{src:null===b||void 0===b?void 0:b.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_20_h_20"}),(0,j.jsx)("textarea",{type:"text",className:"p-2 w-100 mx-2 comment-txt",name:"reply",placeholder:"Reply...",defaultValue:"",onChange:e=>N(e.target.value)}),(0,j.jsx)(h.Z,{appearance:"primary",disabled:!g||/^\s+$/.test(g),type:"submit",className:"reply-btn btn mb-3 me-2",children:"Reply"}),(0,j.jsx)("button",{type:"reset",id:"reset",className:"d-none",children:"reset"})]})})})]})})})):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("h3",{className:"bg-white rounded p-2 py-4 mb-3",children:"No Comments Found"})}),(0,j.jsx)("div",{className:"bg-white rounded p-2 mb-3",children:(0,j.jsx)("div",{className:"d-flex  align-items-center  justify-content-between",children:(0,j.jsxs)("form",{onSubmit:e=>(async e=>{e.preventDefault();let s=v.trim(),t=await(0,o._r)({comment:s,document_Id:f,creator_Id:_});null!==t&&void 0!==t&&t.error?""===s&&u().fire({toast:!0,icon:"error",position:"top-end",title:"Please enter a comment",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}):(p(""),y())})(e),className:"d-flex  justify-content-between",children:[(0,j.jsx)("img",{src:null===b||void 0===b?void 0:b.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_20_h_20"}),(0,j.jsx)("textarea",{name:"comment",placeholder:"Add a comment\u2026",id:"",cols:"30",rows:"10",value:v,onChange:e=>p(e.target.value),className:"comment-inbox m-2 p-2"}),(0,j.jsx)(h.Z,{type:"submit",appearance:"primary",className:"reply-btn btn",disabled:!v||/^\s+$/.test(v),children:"Send"})]})})})]}),(0,j.jsxs)("div",{className:"footer bg-white",children:[(0,j.jsx)("div",{children:"\xa9 2023 MYOT"}),(0,j.jsxs)("div",{className:"d-flex ",children:[(0,j.jsx)("p",{className:"ms-3",children:"About"}),(0,j.jsx)("p",{className:"ms-3",children:"Support"}),(0,j.jsx)("p",{className:"ms-3",children:"Contact Us"})]})]})]}),(0,j.jsx)("div",{className:"col",children:(0,j.jsx)(l.Z,{})})]})})})}}}]);
//# sourceMappingURL=574.df5d0439.chunk.js.map