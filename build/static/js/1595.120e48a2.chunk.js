"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[1595],{11595:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(72791),l=t(39040),i=t(57689),n=t(11087),c=t(72426),r=t.n(c),o=t(58400),d=t(89542),m=(t(29655),t(59434)),x=t(64581),h=t(21830),v=t.n(h),j=t(81161),u=t(80184);const p=()=>{const[e,s]=(0,a.useState)([]),[t,c]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[g,N]=(0,a.useState)(""),b=(0,m.v9)(x.tT),{id:f}=(0,i.UO)();console.log(f),(0,a.useEffect)((()=>{y()}),[]);const y=async()=>{try{let e=await(0,o.lb)(f);s(null===e||void 0===e?void 0:e.commentData),console.log(null===e||void 0===e?void 0:e.commentData)}catch(e){console.log(e)}};let w=localStorage.getItem("user_id")||localStorage.getItem("myot_admin_id");const _=e=>{c((s=>{const t={...s};return Object.keys(t).forEach((e=>{t[e]=!1})),t[e]=!s[e],t}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"container-fluid",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-2 sidebar",children:(0,u.jsx)(d.Z,{})}),(0,u.jsxs)("div",{className:"col-7 middle-content bg-body-tertiary p-0 min-vh-100",children:[(0,u.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,u.jsxs)("nav",{className:"row header bg-white  ",children:[(0,u.jsx)("ul",{className:"col align-items-center mt-3",children:(0,u.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,u.jsx)("a",{className:"nav-link fw-bold ms-2",children:"Tasks / Comments"})})}),(0,u.jsx)("div",{className:"col-7 d-flex align-items-center  justify-content-end",children:(0,u.jsxs)("div",{className:"",children:[(0,u.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,u.jsx)(n.rU,{to:"/Approver/Chat",children:(0,u.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,u.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})})]})}),(0,u.jsxs)("div",{className:"container px-4 text-center min-vh-100 ",children:[e&&(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e.map(((e,s)=>{var a,l;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"bg-white rounded p-2 mb-3",children:[(0,u.jsxs)("div",{className:"d-flex  align-items-center  justify-content-between",children:[(0,u.jsxs)("div",{className:"d-flex  align-items-center justify-content-between",children:[(0,u.jsx)("img",{src:null===e||void 0===e||null===(a=e.creator_Id)||void 0===a?void 0:a.profile_Pic,alt:"",className:"m-2 w_20_h_20"}),(0,u.jsx)("p",{className:"commenter-name text-capitalize ",children:null===e||void 0===e||null===(l=e.creator_Id)||void 0===l?void 0:l.name}),(0,u.jsx)("p",{className:"comment-time m-auto",children:r()(null===e||void 0===e?void 0:e.createdAt).format("MMM Do YY, h:mm a")})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)("div",{className:"cursor_pointer",onClick:()=>_(s),children:t[s]?(0,u.jsx)(n.rU,{className:"ticket-link mt-3 me-1 text-decoration-none",children:"Cancel"}):(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"align-items-center me-2",children:[(0,u.jsx)("img",{src:"/images/dashboard/reply-arrow.svg",className:"me-1"}),(0,u.jsx)(n.rU,{className:"ticket-link mt-3 text-decoration-none",children:"Reply"})]})})}),(0,u.jsxs)("div",{onClick:s=>(async e=>{const s=await(0,o.Nw)(e);s.commentData&&y(),console.log(s)})(null===e||void 0===e?void 0:e._id),className:"ms-2",children:[(0,u.jsx)("img",{src:"/images/icons/delete_icon.png",className:"me-1"}),(0,u.jsx)(n.rU,{className:"ticket-link text-decoration-none text-danger",children:"Delete"})]})]})]}),(0,u.jsx)("p",{className:"comment-txt p-2 mb-0",style:{wordBreak:"break-word"},children:null===e||void 0===e?void 0:e.comment}),(null===e||void 0===e?void 0:e.replyText)&&(0,u.jsx)("div",{style:{borderLeft:"2px solid #f8f9fa"},className:"text-start ms-5",children:null===e||void 0===e?void 0:e.replyText.map((e=>{var s,t;return(0,u.jsx)("div",{className:"bg-white p-2 mb-3",children:(0,u.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)("img",{className:"w_20_h_20 me-3",src:null===e||void 0===e||null===(s=e.creator_Id)||void 0===s?void 0:s.profile_Pic,alt:""}),(0,u.jsx)("p",{className:"commenter-name text-capitalize ",children:null===e||void 0===e||null===(t=e.creator_Id)||void 0===t?void 0:t.name})]}),(0,u.jsx)("p",{className:"comment-txt p-2 mb-0",style:{wordBreak:"break-word"},children:null===e||void 0===e?void 0:e.text})]}),(0,u.jsx)("div",{})]})})}))}),t[s]&&(0,u.jsx)("div",{className:"bg-white rounded p-2 my-3 task_reply",children:(0,u.jsx)("form",{onSubmit:s=>(async(e,s)=>{e.preventDefault();const t=g.trim();(await(0,o.Aq)({text:t,comment_Id:s,creator_Id:w})).error?""===t&&v().fire({toast:!0,icon:"error",position:"top-end",title:"Please Enter Reply",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}):(N(""),y()),document.getElementById("reset").click(),_(s)})(s,null===e||void 0===e?void 0:e._id),children:(0,u.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,u.jsx)("img",{src:null===b||void 0===b?void 0:b.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_20_h_20"}),(0,u.jsx)("textarea",{type:"text",className:"p-2 w-100 mx-2 comment-txt",name:"reply",placeholder:"Reply...",defaultValue:"",onChange:e=>N(e.target.value)}),(0,u.jsx)(j.Z,{type:"submit",appearance:"primary",className:"reply-btn",disabled:!g||/^\s+$/.test(g),children:"Reply"}),(0,u.jsx)("button",{type:"reset",id:"reset",className:"d-none",children:"reset"})]})})})]})})})):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("h3",{className:"bg-white rounded p-2 py-4 mb-3",children:"No Comments Found"})}),(0,u.jsx)("div",{className:"bg-white rounded p-2 mb-3",children:(0,u.jsx)("div",{className:"d-flex  align-items-center  justify-content-between",children:(0,u.jsxs)("form",{onSubmit:e=>(async e=>{e.preventDefault();let s=h.trim(),t=localStorage.getItem("user_id")||localStorage.getItem("myot_admin_id"),a=await(0,o.DG)({comment:s,templete_Id:f,creator_Id:t});null!==a&&void 0!==a&&a.error?""===s&&v().fire({toast:!0,icon:"error",position:"top-end",title:"Please enter a comment",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}):(p(""),y())})(e),className:"d-flex  justify-content-between",children:[(0,u.jsx)("img",{src:null===b||void 0===b?void 0:b.profile_Pic,alt:"",className:"comment-avatar m-auto mt-2 w_20_h_20"}),(0,u.jsx)("textarea",{name:"comment",placeholder:"Add a comment\u2026",id:"",cols:"30",rows:"10",value:h,onChange:e=>p(e.target.value),className:"comment-inbox m-2 p-2"}),(0,u.jsx)(j.Z,{type:"submit",appearance:"primary",disabled:!h||/^\s+$/.test(h),className:"reply-btn",children:"Send"})]})})})]}),(0,u.jsxs)("div",{className:"footer bg-white",children:[(0,u.jsx)("div",{children:"\xa9 2023 MYOT"}),(0,u.jsxs)("div",{className:"d-flex ",children:[(0,u.jsx)("p",{className:"ms-3",children:"About"}),(0,u.jsx)("p",{className:"ms-3",children:"Support"}),(0,u.jsx)("p",{className:"ms-3",children:"Contact Us"})]})]})]}),(0,u.jsx)("div",{className:"col",children:(0,u.jsx)(l.Z,{})})]})})})}}}]);
//# sourceMappingURL=1595.120e48a2.chunk.js.map