"use strict";(self.webpackChunkmyot=self.webpackChunkmyot||[]).push([[4391],{74391:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var l=s(72791),t=s(39040),d=s(54347),i=s(57689),n=s(11087),o=s(28113),r=s(81888),c=s(72426),m=s.n(c),p=s(21830),x=s.n(p),h=s(81161),b=s(80184);const u=()=>{const[e,a]=(0,l.useState)([]),[c,p]=(0,l.useState)(""),[u,j]=(0,l.useState)(),[v,g]=(0,l.useState)(!1),[N,f]=(0,l.useState)(null),[w,y]=(0,l.useState)({departmentname:"",description:""}),[A,C]=(0,l.useState)({columns:[{label:"Department Name",field:"name",sort:"asc",width:50,selected:!1},{label:"Description",field:"description",sort:"asc",width:50,selected:!1},{label:"Actions",field:"actions",sort:"asc",width:50,selected:!1}]});(0,l.useEffect)((()=>{B()}),[]);(0,i.s0)();const k=localStorage.getItem("user_id"),B=async e=>{const{data:a}=await(0,o.bt)(k,{search:e}),s=[];if(null===a||void 0===a||!a.error){var l;let e=null===a||void 0===a||null===(l=a.results)||void 0===l?void 0:l.department;null===e||void 0===e||e.sort(((e,a)=>new Date(null===a||void 0===a?void 0:a.createdAt)-new Date(null===e||void 0===e?void 0:e.createdAt))),null===e||void 0===e||e.map((e=>{let a={};a.name=null===e||void 0===e?void 0:e.departmentName,a.description=(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("span",{style:{maxWidth:"250px"},className:"d-inline-block text-truncate",children:null===e||void 0===e?void 0:e.description})}),a.actions=(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{class:"",children:[(0,b.jsx)("a",{type:"",className:"mx-auto","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,b.jsx)("img",{src:"/images/sidebar/ThreeDots.svg",className:"w-auto cursor_pointer"})}),(0,b.jsxs)("ul",{class:"dropdown-menu border-0 shadow p-3 rounded",children:[(0,b.jsx)("li",{onClick:()=>V(null===e||void 0===e?void 0:e._id),children:(0,b.jsxs)("a",{class:"dropdown-item",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal1",children:[(0,b.jsx)("img",{src:"/images/users/AddressBook.svg",alt:"",className:"me-2"}),"View Department"]})}),(0,b.jsx)("li",{onClick:()=>{f(null===e||void 0===e?void 0:e._id),V(null===e||void 0===e?void 0:e._id)},children:(0,b.jsxs)("a",{class:"dropdown-item",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal2",children:[(0,b.jsx)("img",{src:"/images/users/PencilLine.svg",alt:"",className:"me-2"}),"Edit Department"]})}),(0,b.jsx)("li",{children:(0,b.jsxs)("a",{class:"dropdown-item border-bottom",href:"#",children:[(0,b.jsx)("img",{src:"/images/users/TextAlignLeft.svg",alt:"",className:"me-2"}),"Wrap Column"]})}),(0,b.jsx)("li",{className:"cursor_pointer",onClick:()=>D(null===e||void 0===e?void 0:e._id),children:(0,b.jsxs)("a",{class:"dropdown-item text-danger",children:[(0,b.jsx)("img",{src:"/images/users/Trash.svg",alt:"",className:"me-2"}),"Delete Department"]})})]})]})}),s.push(a)})),C({...A,rows:s})}},V=async e=>{try{let{data:s}=await(0,o.q8)(e);var a;if(null===s||void 0===s||!s.error)j(null===s||void 0===s||null===(a=s.results)||void 0===a?void 0:a.department)}catch(s){console.log(s)}},D=async e=>{let{data:a}=await(0,o.jW)(e);!a||null!==a&&void 0!==a&&a.error||(x().fire({toast:!0,icon:"success",position:"top-end",title:"Deleted successfully",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),B())},M=e=>{const a=e.target.name,s=e.target.value;console.log(a,s),y({...w,[a]:s})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"container-fluid",children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-2 sidebar",children:(0,b.jsx)(d.Z,{})}),(0,b.jsxs)("div",{className:"col-7 middle-content",children:[(0,b.jsx)("div",{className:"container-fluid border-bottom sticky-top bg-white mb-4",children:(0,b.jsxs)("nav",{className:"row header bg-white  ",children:[(0,b.jsx)("ul",{className:"col align-items-center mt-3",children:(0,b.jsx)("li",{className:"nav-item dropdown-hover d-none d-lg-block",children:(0,b.jsx)("a",{className:"nav-link fw-bold",children:"Departments"})})}),(0,b.jsxs)("div",{className:"col d-flex align-items-center  justify-content-end",children:[(0,b.jsx)("form",{className:"",role:"search",children:(0,b.jsx)("input",{className:"form-control search-bar",type:"search",placeholder:"Search","aria-label":"Search"})}),(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("img",{src:"/images/dashboard/announcement.png",alt:"",className:"ms-4 "}),(0,b.jsx)(n.rU,{to:"/Admin/Chat",children:(0,b.jsx)("img",{src:"/images/dashboard/chat-left-dots-fill.png",alt:"",className:"ms-4"})}),(0,b.jsx)("img",{src:"/images/dashboard/round-notifications.png",alt:"",className:"ms-4"})]})]})]})}),(0,b.jsxs)("div",{className:"d-flex justify-content-between ",children:[(0,b.jsx)("p",{className:"table-name mb-2"}),(0,b.jsx)("div",{className:"d-flex justify-content-center th-text",children:(0,b.jsxs)("div",{className:"d-flex whitespace-nowrap",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[(0,b.jsx)("img",{src:"/images/tasks/Add.svg",alt:"",className:"pb-3"}),(0,b.jsx)("p",{className:"pt-1 text-nowrap",children:"Add Department"})]})})]}),(0,b.jsx)("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,b.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-dialog-department",children:(0,b.jsxs)("div",{class:"modal-content border-0",children:[(0,b.jsxs)("div",{class:"d-flex modal-header border-bottom",children:[(0,b.jsx)("p",{class:"",id:"exampleModalLabel",children:"Add Departments"}),(0,b.jsx)("button",{type:"reset",class:"btn-close ",id:"closeModal","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>document.getElementById("formReset").click()})]}),(0,b.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0);let a=localStorage.getItem("myot_admin_id");if(null===w||void 0===w||!w.departmentname||null===w||void 0===w||!w.description)return x().fire({toast:!0,icon:"error",position:"top-end",title:"Fill all fields",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),g(!1),!1;try{let{data:e}=await(0,o.w4)({departmentName:null===w||void 0===w?void 0:w.departmentname,description:null===w||void 0===w?void 0:w.description,creator_Id:a});!e||null!==e&&void 0!==e&&e.error||(x().fire({toast:!0,icon:"success",position:"top-end",title:"New Department Added",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),g(!1),y({departmentname:"",description:""}),document.getElementById("closeModal").click(),B())}catch(s){console.log(s)}finally{g(!1)}},children:[(0,b.jsxs)("div",{className:"row p-3",children:[(0,b.jsx)("div",{className:"col-12 mb-3 ",children:(0,b.jsx)("input",{type:"text",placeholder:"Department Name *",className:"col-12 modal-input td-text  p-2",name:"departmentname",value:w.departmentname,onChange:M})}),(0,b.jsx)("div",{className:"col-12 mb-3 ",children:(0,b.jsx)("textarea",{type:"text",placeholder:"Description",className:"col-12 modal-input td-text p-2",name:"description",value:w.description,onChange:M})})]}),(0,b.jsxs)("div",{className:"d-flex justify-content-end mb-3",children:[(0,b.jsx)(h.Z,{style:{width:"150px"},loading:v,appearance:"primary",className:"btn mb-3 me-2 rounded-2",type:"submit",disabled:!(null!==w&&void 0!==w&&w.departmentname)||!(null!==w&&void 0!==w&&w.description),children:"Add New"}),(0,b.jsx)(h.Z,{style:{width:"100px"},type:"reset",className:"btn mb-3 mx-2 rounded-2 bg-light text-dark border-0","data-bs-dismiss":"modal","aria-label":"Close",children:"Cancel"}),(0,b.jsx)("button",{type:"reset",class:"d-none","data-bs-dismiss":"modal",id:"formReset",children:"reset"})]})]})]})})}),(0,b.jsx)("div",{class:"modal fade",id:"exampleModal1",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,b.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-dialog-department",children:(0,b.jsxs)("div",{class:"modal-content border-0",children:[(0,b.jsxs)("div",{class:"d-flex modal-header border-bottom",children:[(0,b.jsx)("p",{class:"",id:"exampleModalLabel",children:"View Departments"}),(0,b.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,b.jsx)("form",{action:"",children:(0,b.jsxs)("div",{className:"row p-3",children:[(0,b.jsx)("div",{className:"text-end",children:(0,b.jsxs)("p",{children:[" ",(0,b.jsx)("span",{children:"Created At "}),m()(null===u||void 0===u?void 0:u.createdAt).format("L")]})}),(0,b.jsx)("div",{className:"col-12 mb-3 ",children:(0,b.jsx)("input",{type:"text",placeholder:"Department Name *",className:"col-12 modal-input td-text  p-2",name:"departmentname",value:null===u||void 0===u?void 0:u.departmentName,onChange:M,disabled:!0})}),(0,b.jsx)("div",{className:"col-12 mb-3 ",children:(0,b.jsx)("textarea",{style:{minHeight:"120px"},type:"text",placeholder:"Description",className:"col-12 modal-input td-text p-2",name:"description",value:null===u||void 0===u?void 0:u.description,onChange:M,disabled:!0})})]})})]})})}),(0,b.jsx)("div",{class:"modal fade",id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,b.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-dialog-department",children:(0,b.jsxs)("div",{class:"modal-content border-0",children:[(0,b.jsxs)("div",{class:"d-flex modal-header border-bottom",children:[(0,b.jsx)("p",{class:"",id:"exampleModalLabel",children:"Edit Departments"}),(0,b.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"editmodalclose"})]}),(0,b.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0),console.log(w,N);try{let e={departmentName:w.departmentname,description:w.description},{data:a}=await(0,o.q3)(N,e);!a||null!==a&&void 0!==a&&a.error||(console.log(a),x().fire({toast:!0,icon:"success",position:"top-end",title:"Department Updated",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),y({departmentname:"",description:""}),document.getElementById("editmodalclose").click(),B())}catch(a){console.log(a)}finally{g(!1)}},children:[(0,b.jsxs)("div",{className:"row p-3",children:[(0,b.jsx)("div",{className:"text-end",children:(0,b.jsxs)("p",{children:[" ",(0,b.jsx)("span",{children:"Created At "}),m()(null===u||void 0===u?void 0:u.createdAt).format("L")]})}),(0,b.jsx)("div",{className:"col-12 mb-3 ",children:(0,b.jsx)("input",{type:"text",placeholder:"Department Name *",className:"col-12 modal-input td-text  p-2",name:"departmentname",defaultValue:null===u||void 0===u?void 0:u.departmentName,onChange:M})}),(0,b.jsx)("div",{className:"col-12 mb-3 ",children:(0,b.jsx)("textarea",{style:{minHeight:"120px"},type:"text",placeholder:"Description",className:"col-12 modal-input td-text p-2",name:"description",defaultValue:null===u||void 0===u?void 0:u.description,onChange:M})})]}),(0,b.jsxs)("div",{className:"d-flex justify-content-end mb-3",children:[(0,b.jsx)(h.Z,{style:{width:"150px"},loading:v,appearance:"primary",className:"btn mb-3 me-2 rounded-2",type:"submit",disabled:!(null!==w&&void 0!==w&&w.departmentname)&&!(null!==w&&void 0!==w&&w.description),children:"Update"}),(0,b.jsx)(h.Z,{style:{width:"100px"},type:"reset",className:"btn mb-3 mx-2 rounded-2 bg-light text-dark border-0","data-bs-dismiss":"modal","aria-label":"Close",children:"Cancel"}),(0,b.jsx)("button",{type:"reset",class:"d-none","data-bs-dismiss":"modal",id:"formReset",children:"reset"})]})]})]})})}),(0,b.jsxs)("div",{className:"position-relative",children:[(0,b.jsx)("p",{className:"table-name mb-2",children:"Departments"}),(0,b.jsxs)("div",{className:" col-12 d-flex align-items-center table-searchbar",children:[(0,b.jsxs)("div",{className:"d-flex ",children:[(0,b.jsxs)("div",{className:"col-md-3 table-searchbar-imgs",children:[(0,b.jsx)("img",{src:"/images/dashboard/Plus-icon.png",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",className:"p-2 table-searchbar-img"}),(0,b.jsx)("img",{onClick:()=>{const e="asc"===A.sortType?"desc":"asc",a=[...A.rows].sort(((a,s)=>{let l=0;return a.name.toLowerCase()<s.name.toLowerCase()?l=-1:a.name.toLowerCase()>s.name.toLowerCase()&&(l=1),"asc"===e?l:-1*l}));console.log(a),C({...A,rows:a,sortType:e})},src:"/images/dashboard/ArrowsDownUp.png",alt:"",className:"p-2 table-searchbar-img border-end cursor_pointer"})]}),(0,b.jsx)("div",{class:"search_icon",children:(0,b.jsx)("img",{width:20,src:s(28879)})})]}),(0,b.jsx)("form",{className:"d-flex me-2",role:"search"})]}),(0,b.jsx)("div",{className:"col-12 mdb_table mt-3 ",children:(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsx)(r.g0K,{bordered:!0,displayEntries:!1,entries:10,className:"text-nowrap",hover:!0,data:A,noBottomColumns:!0,paginationLabel:"\xab\xbb",sortable:!1})})})]}),(0,b.jsxs)("div",{className:"footer",children:[(0,b.jsx)("div",{children:"\xa9 2023 MYOT"}),(0,b.jsxs)("div",{className:"d-flex ",children:[(0,b.jsx)("p",{className:"ms-3",children:"About"}),(0,b.jsx)("p",{className:"ms-3",children:"Support"}),(0,b.jsx)("p",{className:"ms-3",children:"Contact Us"})]})]})]}),(0,b.jsx)("div",{className:"col",children:(0,b.jsx)(t.Z,{})})]})})," "]})}},28879:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAD7UlEQVRYR8WWXYhUZRiAn/cM/qQlZtbumbOGUlkq0V1BFEFt1JVQSwtChBmVZj904UVbO+c7s6b9IRaUuhe53cVWG11EQZCSBCoRIZZlQgt2zigutGBZ7c956ztzVmZnZ2bn7IC+d2fm/Xnen+/7XuEyi1zm+GQGWGd0/gh05KA9htGFEA0bGZ1rIk0BXL9Tr54Y41GBLoV7agQ7hfIxOQaiXvklC0xDgGW+LlngUBDYAixqxrHAJyg9oZGTTerXVstv1xVM8iWwtkJjGPhchOOx8htwncBNwP3A7YCT6p5XpbtkxNo3lJoVaOvTVbmYo8Bya63CQWL8kpFv6nmzwDpBjwibUx1V6Cr58mkjghkAtuwLHb6jnJmVPVGBrYjobNnY/11fHxaHD4F5wN+i3Bka+aGe7QwAz+g+FZ5KMlf2lozY/meSvNH1CDZz25KTkbIGI3EtJ9MA2o2udYQfU8VvowJ3N5t5tXM30O0CLye/C09EBXl/VoB8oO9Rnngk5r4wkK8zpV6hvNLo0jHhNHAlcCzy5bZZAdxAIwEXGI58WTXX4FN2eaP7ETba71yMdzqQqNrnxRZ0GL0xFn5NFJS3IiPbWgVwA31IYKjcBTaGvnxQF8D19S5xOJQoC1vCguxtFSDfpzcT83OaVDEy4tcFSCf3s3RoNkQFsUepJenYpVfE57mQOtkf+bKpEUAnwldpuTaHvuxrKTrg7dBrdJyR1M+eyJdn6gK0F3WdoxxPFUzkS9AqQEdRb42VY2lSr4S+vFoXoO1NXZy7wB/pDXYg8uXeVgHcQF8Q2J3MdUxXKZBkICtl2kWUL+oXKA8C8bjinTNyphUIN9AjUn6kxseVZeeM/NkYINDHgfKNpQxERuz3nMQL9BGFwaT8wlBYkK5ajqa/BYOay5/gFLAy7Vt36MtHWQk8o6tVOAIstak4yurfjVi/M2TGY+QG+oCQ7AFWJgU2ZIFw+3SNxMlp8pIklN2hkRfrJVFzH/AC7VUoXjRSipOLeePsNvmrbjWMOnmHbhR7fJckXRQOlm6hk26ZzARgld1AdwlUktsT0p+LeafyTl/+ul417x/sBfOcwA0VgQ7NV9bPtrA23Am9QJ9WeBtYkGUOROkPYStGJqxdPlBfhX9LBXmt4SmoFaR9h16bG6NHy6+aHap6MoYyFEPfGSM/TSm5RX1eNEnCtuSlaoim1vLE2aDm3BN0OnYtV1ao0AaMihLGwvfxIoZqzYgb6JMC/VNACj0lX3ZOfTcPkKUHVbrVEMCzkS/vJqekBb+ZTL2iPqbKwP/BRyYd7jjbK3atv3QAyTAWdVMcc7hyRi5ZBTLfA5nq24LyfxJhZTC25f8ZAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=4391.eb378d8c.chunk.js.map